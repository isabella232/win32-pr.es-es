---
description: En este tema se describen las tres fases del proceso de indización y los componentes principales implicados en cada una de ellas, se explica el tiempo de la actividad de indización y se proporcionan algunas notas para los desarrolladores de terceros que desean que sus almacenes de datos o formatos de archivo se indexen.
ms.assetid: cfba12eb-4123-4b57-8311-d4fc8f9f514e
title: Proceso de indexación en Windows Search
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87867d5925cd53b237092435bbc9d16428418b4f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103808953"
---
# <a name="indexing-process-in-windows-search"></a><span data-ttu-id="cb3bb-103">Proceso de indexación en Windows Search</span><span class="sxs-lookup"><span data-stu-id="cb3bb-103">Indexing Process in Windows Search</span></span>

<span data-ttu-id="cb3bb-104">En este tema se describen las tres fases del proceso de indización y los componentes principales implicados en cada una de ellas, se explica el tiempo de la actividad de indización y se proporcionan algunas notas para los desarrolladores de terceros que desean que sus almacenes de datos o formatos de archivo se indexen.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-104">This topic describes the three stages of the indexing process and the primary components involved in each, explains the timing of indexing activity, and provides some notes for third-party developers who want their data stores or file formats indexed.</span></span>

<span data-ttu-id="cb3bb-105">Este tema se organiza de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="cb3bb-105">This topic is organized as follows:</span></span>

- [<span data-ttu-id="cb3bb-106">Información general</span><span class="sxs-lookup"><span data-stu-id="cb3bb-106">Overview</span></span>](#overview)
- [<span data-ttu-id="cb3bb-107">Fase 1: poner en cola las direcciones URL para la indexación</span><span class="sxs-lookup"><span data-stu-id="cb3bb-107">Stage 1: Queuing URLs for Indexing</span></span>](#stage-1-queuing-urls-for-indexing)
- [<span data-ttu-id="cb3bb-108">Fase 2: rastreo de direcciones URL</span><span class="sxs-lookup"><span data-stu-id="cb3bb-108">Stage 2: Crawling URLs</span></span>](#stage-2-crawling-urls)
- [<span data-ttu-id="cb3bb-109">Fase 3: actualización del índice</span><span class="sxs-lookup"><span data-stu-id="cb3bb-109">Stage 3: Updating the Index</span></span>](#stage-3-updating-the-index)
- [<span data-ttu-id="cb3bb-110">Cómo se programa la indexación</span><span class="sxs-lookup"><span data-stu-id="cb3bb-110">How Indexing is Scheduled</span></span>](#how-indexing-is-scheduled)
- [<span data-ttu-id="cb3bb-111">Notas a los implementadores</span><span class="sxs-lookup"><span data-stu-id="cb3bb-111">Notes to Implementers</span></span>](#notes-to-implementers)
- [<span data-ttu-id="cb3bb-112">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="cb3bb-112">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="cb3bb-113">Información general</span><span class="sxs-lookup"><span data-stu-id="cb3bb-113">Overview</span></span>

<span data-ttu-id="cb3bb-114">Windows Search admite la indización de propiedades y contenido de archivos de distintos formatos de archivo, como formatos. doc o. JPEG, y almacenes de datos, como el sistema de archivos o los buzones de correo de Windows Outlook.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-114">Windows Search supports the indexing of properties and content from files of different file formats, such as .doc or .jpeg formats, and data stores, such as the file system or Windows Outlook mailboxes.</span></span> <span data-ttu-id="cb3bb-115">Hay dos tipos de índices: índices de valor que permiten filtrar y ordenar por el valor completo de una propiedad y índices invertidos que indexan palabras dentro de las propiedades de texto o el contenido.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-115">There are two kinds of indices: value indices that allow filtering and sorting by the whole value of a property and inverted indices that index words within textual properties or content.</span></span> <span data-ttu-id="cb3bb-116">Si tiene un formato de archivo personalizado o un almacén de datos, debe comprender el modo en que los índices de búsqueda de Windows permiten que los elementos se indexen correctamente.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-116">If you have a custom file format or data store, you need to understand how Windows Search indexes in order to get your items indexed correctly.</span></span>

<span data-ttu-id="cb3bb-117">El proceso de indización se produce en tres fases controladas por un componente de búsqueda de Windows denominado recopilador.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-117">The indexing process happens in three stages controlled by a Windows Search component called the gatherer.</span></span> <span data-ttu-id="cb3bb-118">En la primera fase, el recopilador agrega direcciones URL a las colas.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-118">In the first stage, the gatherer adds URLs to queues.</span></span> <span data-ttu-id="cb3bb-119">Las direcciones URL identifican los elementos que se van a indexar, y las colas simplemente tienen prioridad en las listas de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-119">The URLs identify items to be indexed, and the queues are merely prioritized lists of URLs.</span></span> <span data-ttu-id="cb3bb-120">En la segunda fase, el recopilador coordina otros componentes de búsqueda de Windows y de terceros para tener acceso a los elementos y recopilar datos sobre ellos.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-120">In the second stage, the gatherer coordinates other Windows Search and third-party components to access the items and collect data about them.</span></span> <span data-ttu-id="cb3bb-121">Por último, en la tercera fase, los datos recopilados se agregan al índice.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-121">Finally, in the third stage, the data collected is added to the index.</span></span>

<span data-ttu-id="cb3bb-122">En el diagrama siguiente se muestran los componentes principales y el flujo de datos a través del proceso de indización.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-122">The following diagram shows the principal components and flow of data through the indexing process.</span></span> <span data-ttu-id="cb3bb-123">Hay varios componentes implicados en la recopilación de datos para el índice.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-123">A number of components are involved in collecting data for the index.</span></span> <span data-ttu-id="cb3bb-124">Algunos de ellos forman parte de la búsqueda de Windows y otros proceden de aplicaciones de terceros.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-124">Some of these are a part of Windows Search, and some come from third-party applications.</span></span> <span data-ttu-id="cb3bb-125">Si tiene un almacén de datos o un formato de archivo personalizado, la búsqueda de Windows se basa en el controlador de protocolo y filtra el acceso a las direcciones URL y la emisión de propiedades para la indexación.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-125">If you have a custom data store or file format, Windows Search relies on your protocol handler and filter for accessing URLs and emitting properties for indexing.</span></span> <span data-ttu-id="cb3bb-126">Los componentes de Windows Search se muestran en azul y los componentes de terceros se muestran en verde.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-126">Windows Search components are shown in blue, and third-party components are shown in green.</span></span>

![diagrama que muestra la interacción entre los componentes durante el proceso de indexación](images/indexingcompoverview.jpg)

## <a name="stage-1-queuing-urls-for-indexing"></a><span data-ttu-id="cb3bb-128">Fase 1: poner en cola las direcciones URL para la indexación</span><span class="sxs-lookup"><span data-stu-id="cb3bb-128">Stage 1: Queuing URLs for Indexing</span></span>

<span data-ttu-id="cb3bb-129">En la primera fase de la indización, el recopilador recopila información sobre las actualizaciones de los almacenes de datos, compara esa información con el ámbito de rastreo conocido y, a continuación, crea una cola de direcciones URL para atravesar para recopilar datos para el índice.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-129">In the first stage of indexing, the gatherer collects information about updates to data stores, compares that information to the known crawl scope, and then builds a queue of URLs to traverse to collect data for the index.</span></span> <span data-ttu-id="cb3bb-130">En el caso de los orígenes que no se basan en la notificación, como unidades FAT, el recopilador inicia periódicamente un recorrido completo del ámbito de rastreo para que los datos del índice se mantengan actualizados.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-130">For sources that are not based on notification, such as FAT drives, the gatherer periodically initiates a full traversal of the crawl scope so that the data in the index is kept fresh.</span></span> <span data-ttu-id="cb3bb-131">En el caso de orígenes como NTFS, solo hay un rastreo y todo lo demás lo controlan las notificaciones del [diario de cambios de USN](/windows/desktop/FileIO/change-journals).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-131">For sources such as NTFS, there is only a single crawl and everything else is handled by notifications from the [USN Change Journal](/windows/desktop/FileIO/change-journals).</span></span> <span data-ttu-id="cb3bb-132">Tampoco hay ningún rastreo de Microsoft Outlook.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-132">There is also no crawl of Microsoft Outlook.</span></span> <span data-ttu-id="cb3bb-133">En el diagrama siguiente se muestra una vista de alto nivel del proceso de puesta en cola para la indexación sin rastreo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-133">The following diagram shows a high-level view of the queuing process for non-crawl indexing.</span></span>

![diagrama que muestra el proceso de consulta para la indización que no es de rastreo](images/queuingurls.jpg)

<span data-ttu-id="cb3bb-135">En el resto de esta sección se explica cómo la búsqueda de Windows determina las direcciones URL que se van a rastrear y se definen algunos términos importantes durante el proceso.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-135">The rest of this section explains how Windows Search determines what URLs to crawl, and defines some important terms along the way.</span></span>

<span data-ttu-id="cb3bb-136">**Ámbito de rastreo**  El ámbito de rastreo es un conjunto de direcciones URL que la búsqueda de Windows atraviesa para recopilar datos acerca de los elementos que el usuario quiere indexar para búsquedas más rápidas.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-136">**Crawl Scope**  The crawl scope is a set of URLs that Windows Search traverses to collect data about items that the user wants indexed for faster searches.</span></span> <span data-ttu-id="cb3bb-137">Windows Search agrega algunas direcciones URL al ámbito de rastreo de forma predeterminada, como las rutas de acceso a las carpetas de **documentos** e **imágenes** de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-137">Windows Search adds some URLs to the crawl scope by default, like paths to users' **Documents** and **Pictures** folders.</span></span> <span data-ttu-id="cb3bb-138">Otras aplicaciones, usuarios y directiva de grupo pueden agregar otras direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-138">Other URLs can be added by third-party applications, users, and Group Policy.</span></span> <span data-ttu-id="cb3bb-139">Por último, los usuarios y directiva de grupo pueden excluir explícitamente las direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-139">Finally, both users and Group Policy can explicitly exclude URLs.</span></span> <span data-ttu-id="cb3bb-140">Windows Search toma todas las direcciones URL agregadas y quita las direcciones URL excluidas para determinar el ámbito de rastreo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-140">Windows Search takes all the added URLs and removes the excluded URLs to determine the crawl scope.</span></span> <span data-ttu-id="cb3bb-141">Este es el espacio de trabajo de las direcciones URL desde las que el recopilador comienza su trabajo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-141">This is the working set of URLs from which the gatherer begins its work.</span></span>

<span data-ttu-id="cb3bb-142">**Recopilador**  El recopilador es un componente de Windows Search que recopila información sobre las direcciones URL del ámbito de rastreo y crea una cola de direcciones URL para que el indizador rastree.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-142">**Gatherer**  The gatherer is a Windows Search component that collects information about URLs within the crawl scope and creates a queue of URLs for the indexer to crawl.</span></span> <span data-ttu-id="cb3bb-143">Cuando se agrega, elimina o actualiza un elemento en el ámbito de rastreo, el proveedor de notificaciones del almacén de datos notifica al recopilador.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-143">When an item in the crawl scope is added, deleted, or updated, the gatherer is notified by the data store's notifications provider.</span></span> <span data-ttu-id="cb3bb-144">Hay un rastreo inicial en el que el recopilador comienza en la raíz del ámbito de rastreo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-144">There is an initial crawl where the gatherer starts at the crawl scope root.</span></span> <span data-ttu-id="cb3bb-145">La dirección URL se pasa al controlador de protocolo y, a continuación, al [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)adecuado.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-145">The URL is passed to the protocol handler and then to the appropriate [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter).</span></span> <span data-ttu-id="cb3bb-146">El filtro suele ser una enumeración de directorios que genera más direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-146">The filter is usually a directory enumeration that produces more URLs.</span></span> <span data-ttu-id="cb3bb-147">Las notificaciones son el estado estable.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-147">Notifications are the steady-state.</span></span> <span data-ttu-id="cb3bb-148">Normalmente, cada almacén de datos tiene su propio controlador de protocolo que proporciona estas notificaciones.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-148">Typically, each data store has its own protocol handler that provides these notifications.</span></span> <span data-ttu-id="cb3bb-149">Por ejemplo, en el sistema de archivos local, el [diario de cambios USN](/windows/desktop/FileIO/change-journals) actúa como proveedor de notificaciones para todas las direcciones URL del protocolo File://.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-149">For example, on the local file system, the [USN Change Journal](/windows/desktop/FileIO/change-journals) acts as a notifications provider for all URLs under the file:// protocol.</span></span> <span data-ttu-id="cb3bb-150">De forma similar, Microsoft Outlook actúa como proveedor de notificaciones para todas las direcciones URL del protocolo mapi://.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-150">Similarly, Microsoft Outlook acts as a notifications provider for all URLs under the mapi:// protocol.</span></span> <span data-ttu-id="cb3bb-151">Cuando un usuario recibe, mueve o elimina el correo electrónico, Outlook notifica al recopilador el estado cambiado del correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-151">When a user receives, moves, or deletes email, Outlook notifies the gatherer of the changed status of the email.</span></span> <span data-ttu-id="cb3bb-152">Desde estas notificaciones, el recopilador crea colas de indexación de las direcciones URL que se van a rastrear.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-152">From these notifications, the gatherer creates indexing queues of URLs to crawl.</span></span>

<span data-ttu-id="cb3bb-153">**Indexación de colas**  Las colas de indexación son listas de direcciones URL que identifican los elementos que se deben indexar o volver a indexar.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-153">**Indexing Queues**  The indexing queues are lists of URLs that identify items that need to be indexed or re-indexed.</span></span> <span data-ttu-id="cb3bb-154">El recopilador compara las direcciones URL que recibe de los proveedores de notificaciones con las direcciones URL del ámbito de rastreo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-154">The gatherer compares the URLs it receives from notifications providers to the URLs in the crawl scope.</span></span> <span data-ttu-id="cb3bb-155">Cada dirección URL de los proveedores de notificaciones que se encuentra dentro del ámbito de rastreo se agrega a una cola que el recopilador utiliza para dar prioridad a las direcciones URL que se van a procesar a continuación.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-155">Every URL from notifications providers that falls within the crawl scope is added to a queue that the gatherer uses to prioritize which URLs to process next.</span></span>

<span data-ttu-id="cb3bb-156">Hay tres colas: notificaciones de prioridad alta, notificaciones normales y rastreos periódicos.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-156">There are three queues: high priority notifications, normal notifications, and periodic crawls.</span></span> <span data-ttu-id="cb3bb-157">La cola de prioridad alta es para las notificaciones que se deben procesar inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-157">The high priority queue is for notifications that should be processed immediately.</span></span> <span data-ttu-id="cb3bb-158">Por ejemplo, cuando un usuario cambia la propiedad título de un elemento en el explorador de Windows, la vista del explorador de Windows debe actualizarse inmediatamente después del cambio.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-158">For example, when a user changes an item's title property in Windows Explorer, the Windows Explorer view needs to be updated immediately after the change.</span></span> <span data-ttu-id="cb3bb-159">La cola de notificación normal es para todas las notificaciones de cambio restantes.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-159">The normal notification queue is for all remaining change notifications.</span></span> <span data-ttu-id="cb3bb-160">Las colas de notificaciones se procesan antes que la cola de rastreo porque es más probable que los elementos modificados sean de interés para un usuario.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-160">The notification queues are processed before the crawl queue because changed items are more likely to be of interest to a user.</span></span> <span data-ttu-id="cb3bb-161">El recopilador obtiene acceso a los datos de las direcciones URL de cada cola en orden FIFO (primero en salir, primero en salir).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-161">The gatherer accesses data for the URLs on each queue in first in, first out (FIFO) order.</span></span>

<span data-ttu-id="cb3bb-162">Para obtener más información sobre la priorización y las API de eventos que se introdujeron en Windows 7, consulte [indización de los eventos Priority y Rowset en Windows 7](indexing-prioritization-and-rowset-events.md).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-162">For more information on prioritization, and eventing APIs introduced in Windows 7, see [Indexing Prioritization and Rowset Events in Windows 7](indexing-prioritization-and-rowset-events.md).</span></span> <span data-ttu-id="cb3bb-163">Para obtener más información sobre la administración del ámbito de rastreo y las notificaciones, vea [proporcionar notificaciones de cambio](-search-3x-wds-notifyingofchanges.md) y [usar el administrador de ámbito de rastreo](-search-3x-wds-extidx-csm.md).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-163">For more information on crawl scope management and notifications, see [Providing Change Notifications](-search-3x-wds-notifyingofchanges.md) and [Using the Crawl Scope Manager](-search-3x-wds-extidx-csm.md).</span></span>

## <a name="stage-2-crawling-urls"></a><span data-ttu-id="cb3bb-164">Fase 2: rastreo de direcciones URL</span><span class="sxs-lookup"><span data-stu-id="cb3bb-164">Stage 2: Crawling URLs</span></span>

<span data-ttu-id="cb3bb-165">En la segunda fase de la indización, el recopilador rastrea las colas, el acceso a los almacenes de datos y la recuperación de secuencias de elementos.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-165">In the second stage of indexing, the gatherer crawls through the queues, accessing data stores and retrieving item streams.</span></span> <span data-ttu-id="cb3bb-166">En primer lugar, el recopilador busca el controlador de protocolo adecuado para cada dirección URL.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-166">First, the gatherer finds the appropriate protocol handler for each URL.</span></span> <span data-ttu-id="cb3bb-167">A continuación, el recopilador pasa la dirección URL al controlador de protocolo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-167">Then, the gatherer passes the URL to the protocol handler.</span></span> <span data-ttu-id="cb3bb-168">El controlador de protocolo tiene acceso al elemento y pasa los metadatos del elemento de vuelta al recopilador.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-168">The protocol handler accesses the item and passes item metadata back to the gatherer.</span></span> <span data-ttu-id="cb3bb-169">El recopilador utiliza los metadatos para identificar el filtro correcto.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-169">The gatherer uses the metadata to identify the correct filter.</span></span>

<span data-ttu-id="cb3bb-170">En el diagrama siguiente se muestra una vista de alto nivel del proceso de rastreo de URL.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-170">The following diagram shows a high-level view of the URL-crawling process.</span></span> <span data-ttu-id="cb3bb-171">Esta fase incluye una coordinación y una comunicación considerables entre los componentes.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-171">This stage includes considerable coordination and communication between components.</span></span>

![diagrama que muestra el proceso de rastreo de direcciones URL y acceso a elementos](images/crawlingqueues.jpg)

<span data-ttu-id="cb3bb-173">En el resto de esta sección se describe cómo Windows Search tiene acceso a los elementos para la indexación y explica los roles de cada uno de los componentes implicados.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-173">The rest of this section describes how Windows Search accesses items for indexing and explains the roles of each of the components involved.</span></span>

<span data-ttu-id="cb3bb-174">**Recopilador**  En la fase 2, la fase de rastreo, el recopilador procesa las direcciones URL en las colas, comenzando por la cola de prioridad alta.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-174">**Gatherer**  In stage 2, the crawling stage, the gatherer processes the URLs in the queues, beginning with the high priority queue.</span></span> <span data-ttu-id="cb3bb-175">Cada dirección URL se examina para identificar su Protocolo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-175">Each URL is examined to identify its protocol.</span></span> <span data-ttu-id="cb3bb-176">A continuación, el recopilador busca el controlador de protocolo registrado para ese protocolo y lo crea en el proceso de búsqueda de host de protocolo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-176">The gatherer then looks up the protocol handler registered for that protocol and instantiates it in the search protocol host process.</span></span>

<span data-ttu-id="cb3bb-177">**Buscar host de protocolo**  El host del Protocolo de búsqueda es simplemente un proceso de host con conversión boxing para los controladores de protocolo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-177">**Search Protocol Host**  The search protocol host is merely a boxed, host process for protocol handlers.</span></span> <span data-ttu-id="cb3bb-178">Normalmente, Windows Search crea dos procesos de host, uno que se ejecuta en el contexto de seguridad del sistema y otro que se ejecuta en el contexto de seguridad del usuario.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-178">Typically, Windows Search creates two such host processes, one that runs in the system security context and one that runs in the user security context.</span></span> <span data-ttu-id="cb3bb-179">Esta separación garantiza que los datos específicos de un usuario no se ejecuten nunca en el contexto del sistema.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-179">This separation ensures that data specific to a user is never run in the system context.</span></span>

<span data-ttu-id="cb3bb-180">Windows Search también usa el proceso de host para aislar una instancia de un controlador de protocolo de otros procesos o aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-180">Windows Search also uses the host process to isolate an instance of a protocol handler from other processes or applications.</span></span> <span data-ttu-id="cb3bb-181">De este modo, ninguna aplicación externa puede tener acceso a esa instancia específica del controlador de protocolo y, si el controlador de protocolo produce un error inesperadamente, solo se ve afectado el proceso de indización.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-181">This way, no outside application can access that specific instance of the protocol handler, and if the protocol handler fails unexpectedly, only the indexing process is affected.</span></span> <span data-ttu-id="cb3bb-182">Dado que el proceso de host ejecuta código de terceros (controladores de protocolo), Windows Search recicla periódicamente el proceso para minimizar el tiempo que un ataque de éxito tiene para aprovechar la información del proceso.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-182">Because the host process runs third party code (protocol handlers), Windows Search periodically recycles the process to minimize the time a successful attack has to exploit information in the process.</span></span> <span data-ttu-id="cb3bb-183">Más allá de esto, el host del Protocolo de búsqueda no afecta al rastreo de direcciones URL ni a la indexación de elementos.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-183">Beyond this, the search protocol host does not affect the crawling of URLs or indexing of items.</span></span>

<span data-ttu-id="cb3bb-184">**Controladores de protocolo**  Los controladores de protocolo proporcionan acceso a los elementos de un almacén de datos mediante el protocolo del almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-184">**Protocol Handlers**  Protocol handlers provide access to items in a data store using the data store's protocol.</span></span> <span data-ttu-id="cb3bb-185">Por ejemplo, el controlador de protocolo NTFS proporciona acceso a los archivos de una unidad local mediante el protocolo file://.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-185">For example, the NTFS protocol handler provides access to files on a local drive using the file:// protocol.</span></span> <span data-ttu-id="cb3bb-186">El controlador de protocolo sabe cómo atravesar el almacén de datos, identificar elementos nuevos o actualizados y notificar al recopilador.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-186">The protocol handler knows how to traverse the data store, identify new or updated items, and notify the gatherer.</span></span> <span data-ttu-id="cb3bb-187">A continuación, cuando comienza el rastreo, el controlador de protocolo proporciona un objeto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) al recopilador para enlazar con la secuencia subyacente del elemento y devolver los metadatos del elemento, como las restricciones de seguridad y la hora de la última modificación.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-187">Then, when crawling begins, the protocol handler provides an [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object to the gatherer to bind to the item's underlying stream and return item metadata such as security restrictions and last modified time.</span></span>

> [!NOTE]  
> <span data-ttu-id="cb3bb-188">Los controladores de Protocolo no son componentes de Windows Search; son componentes del protocolo específico y del almacén de datos a los que están diseñados para tener acceso.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-188">Protocol handlers are not Windows Search components; they are components of the specific protocol and data store they are designed to access.</span></span> <span data-ttu-id="cb3bb-189">Si tiene un almacén de datos personalizado que desea indizar, debe implementar un controlador de protocolo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-189">If you have a custom data store you want indexed, you need to implement a protocol handler.</span></span> <span data-ttu-id="cb3bb-190">Para obtener más información sobre los controladores de protocolo y cómo implementar uno, consulte [desarrollar controladores de protocolo](-search-3x-wds-phaddins.md).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-190">For more information on protocol handlers and how to implement one, refer to [Developing Protocol Handlers](-search-3x-wds-phaddins.md).</span></span>

<span data-ttu-id="cb3bb-191">**Metadatos y flujo**  Con los metadatos devueltos por el objeto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) del controlador de protocolo, el recopilador identifica el filtro correcto para la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-191">**Metadata and Stream**  Using metadata returned by the protocol handler's [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object, the gatherer identifies the correct filter for the URL.</span></span> <span data-ttu-id="cb3bb-192">El recopilador analiza la extensión de nombre de archivo del elemento y busca el filtro registrado para esa extensión.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-192">The gatherer parses the item's file name extension and looks up the filter registered for that extension.</span></span> <span data-ttu-id="cb3bb-193">Si el recopilador no puede encontrar un filtro, Windows Search usa los metadatos para derivar un conjunto mínimo de información de propiedades del sistema (como System. ItemName) y actualiza el índice.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-193">If the gatherer is unable to find a filter, Windows Search uses the metadata to derive a minimal set of system property information (like System.ItemName) and updates the index.</span></span> <span data-ttu-id="cb3bb-194">De lo contrario, si el recopilador encuentra el filtro, comienza la tercera fase de la indización.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-194">Otherwise, if the gatherer finds the filter, the third stage of indexing begins.</span></span>

## <a name="stage-3-updating-the-index"></a><span data-ttu-id="cb3bb-195">Fase 3: actualización del índice</span><span class="sxs-lookup"><span data-stu-id="cb3bb-195">Stage 3: Updating the Index</span></span>

<span data-ttu-id="cb3bb-196">En la tercera fase de la indización, el recopilador crea una instancia del filtro correcto para la dirección URL e inicializa el filtro con la secuencia del objeto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) .</span><span class="sxs-lookup"><span data-stu-id="cb3bb-196">In the third stage of indexing, the gatherer instantiates the correct filter for the URL and initializes the filter with the stream from the [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object.</span></span> <span data-ttu-id="cb3bb-197">A continuación, el filtro tiene acceso al elemento y devuelve el contenido del índice.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-197">The filter then accesses the item and returns content for the index.</span></span> <span data-ttu-id="cb3bb-198">Si tiene un formato de archivo personalizado, Windows Search se basa en el filtro para tener acceso a las direcciones URL y emitir el contenido y las propiedades para la indexación.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-198">If you have a custom file format, Windows Search relies on your filter to access URLs and emit content and properties for indexing.</span></span>

<span data-ttu-id="cb3bb-199">En el diagrama siguiente se muestra una vista de alto nivel del proceso de acceso a datos.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-199">The following diagram shows a high-level view of the data access process.</span></span> <span data-ttu-id="cb3bb-200">Esta fase incluye una coordinación y una comunicación considerables entre los componentes.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-200">This stage includes considerable coordination and communication between components.</span></span>

![diagrama que muestra los datos del elemento emitidos para el índice](images/filteringdata.jpg)

<span data-ttu-id="cb3bb-202">En el resto de esta sección se describe cómo Windows Search tiene acceso a los datos de elementos para la indexación y explica los roles de cada uno de los componentes implicados.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-202">The rest of this section describes how Windows Search accesses item data for indexing and explains the roles of each of the components involved.</span></span>

<span data-ttu-id="cb3bb-203">**Recopilador**  Al principio de esta fase, el rol del recopilador es crear una instancia del filtro correcto para el elemento y pasarle el flujo del elemento.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-203">**Gatherer**  At the beginning of this stage, the gatherer's role is to instantiate the correct filter for the item and pass it the item stream.</span></span> <span data-ttu-id="cb3bb-204">Al final de esta fase, el recopilador toma el contenido y las propiedades emitidos por el filtro y el controlador de propiedades y actualiza el índice.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-204">At the end of this stage, the gatherer takes the content and properties emitted by the filter and property handler and updates the index.</span></span>

<span data-ttu-id="cb3bb-205">**Host de filtro**  El host de filtro es simplemente un proceso de host para los filtros y los controladores de propiedades y sirve para un propósito similar al host del Protocolo de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-205">**Filter Host**  The filter host is merely a host process for filters and property handlers and serves a purpose similar to the search protocol host.</span></span> <span data-ttu-id="cb3bb-206">El proceso de host aísla los filtros y los controladores de propiedades del resto del sistema por las mismas razones de seguridad y estabilidad que los procesos de host de protocolo de búsqueda aíslan los controladores de protocolo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-206">The host process isolates filters and property handlers from the rest of the system for the same security and stability reasons that search protocol host processes isolate protocol handlers.</span></span> <span data-ttu-id="cb3bb-207">El proceso de host se ejecuta con derechos mínimos (no puede tener acceso al sistema de archivos) y se recicla ocasionalmente para protegerse frente a ataques de seguridad.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-207">The host process runs with minimal rights (it can't even access the file system) and is occasionally recycled to protect against security attacks.</span></span> <span data-ttu-id="cb3bb-208">Windows Search también supervisa el uso de recursos para que, si un filtro consume demasiados recursos, se recicle el proceso de host.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-208">Windows Search also monitors resource use so that if a filter consumes too many resources, the host process is recycled.</span></span>

<span data-ttu-id="cb3bb-209">**Filtros**  de  Los filtros son componentes críticos en el proceso de indización que emiten información del elemento para el recopilador.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-209">**Filters**  Filters are critical components in the indexing process that emit item information for the gatherer.</span></span> <span data-ttu-id="cb3bb-210">Los filtros se denominan después de la interfaz principal utilizada en su implementación, la interfaz [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) y, por consiguiente, se conocen a veces como IFilters.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-210">Filters are named after the principal interface used in their implementation, the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface, and consequently are sometimes referred to as IFilters.</span></span> <span data-ttu-id="cb3bb-211">Hay dos tipos de filtros: uno que interactúa con elementos individuales como archivos y otro que interactúa con contenedores como carpetas.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-211">There are two kinds of filters: one that interacts with individual items like files and one that interacts with containers like folders.</span></span> <span data-ttu-id="cb3bb-212">Ambos proporcionan datos para el índice.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-212">Both provide data for the index.</span></span>

<span data-ttu-id="cb3bb-213">Con los metadatos devueltos por el objeto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) del controlador de protocolo, el recopilador identifica el filtro correcto para una dirección URL determinada y lo pasa a la secuencia.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-213">Using metadata returned by the protocol handler's [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object, the gatherer identifies the correct filter for a particular URL and passes it to the stream.</span></span> <span data-ttu-id="cb3bb-214">El recopilador identifica el filtro correcto a través de un controlador de protocolo o de la extensión de nombre de archivo, el tipo MIME o el identificador de clase (CLSID).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-214">The gatherer identifies the correct filter either through a protocol handler or by the file name extension, MIME type, or class identifier (CLSID).</span></span> <span data-ttu-id="cb3bb-215">Si la dirección URL apunta a un contenedor, el filtro emite propiedades para el contenedor y enumera los elementos del contenedor (direcciones URL secundarias).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-215">If the URL points to a container, the filter emits properties for the container and enumerates the items in the container (child URLs).</span></span> <span data-ttu-id="cb3bb-216">Si la dirección URL apunta a un elemento, el filtro devuelve el contenido textual, si cualquier lectura de las propiedades y es más complejo que los controladores de propiedades.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-216">If the URL points to an item, the filter returns the textual content, if any the reading of properties and are more complex than property handlers.</span></span> <span data-ttu-id="cb3bb-217">Por lo general, se recomienda que los filtros emitan el contenido de los elementos, mientras que los controladores de propiedades emiten propiedades de elemento.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-217">Generally, we recommend that filters emit item contents while property handlers emit item properties.</span></span> <span data-ttu-id="cb3bb-218">Sin embargo, si el filtro necesita trabajar con aplicaciones antiguas que no reconocen controladores de propiedades, puede implementar el filtro para emitir propiedades también.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-218">However, if your filter needs to work with older applications that do not recognize property handlers, you can implement the filter to emit properties as well.</span></span>

> [!NOTE]  
> <span data-ttu-id="cb3bb-219">Los filtros no son componentes de Windows Search; son componentes relacionados con el formato de archivo o contenedor específico al que están diseñados para tener acceso.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-219">Filters are not Windows Search components; they are components related to the specific file format or container they are designed to access.</span></span> <span data-ttu-id="cb3bb-220">Para obtener más información sobre los filtros y cómo implementar uno para un contenedor o un formato de archivo personalizado, vea [prácticas recomendadas para crear controladores de filtro en Windows Search](-search-3x-wds-extidx-filters.md).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-220">For more information on filters and how to implement one for a custom file format or container, see [Best Practices for Creating Filter Handlers in Windows Search](-search-3x-wds-extidx-filters.md).</span></span>

<span data-ttu-id="cb3bb-221">En la tabla siguiente se enumeran los resultados que el recopilador recibe de un filtro ([**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)) y un controlador de propiedades ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)) durante el proceso de indización.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-221">The following table lists the results that the gatherer receives from a filter ([**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)) and property handler ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)) during the indexing process.</span></span>

|                            | [<span data-ttu-id="cb3bb-222">**Imaging**</span><span class="sxs-lookup"><span data-stu-id="cb3bb-222">**IFilter**</span></span>](/windows/win32/api/filter/nn-filter-ifilter) | [<span data-ttu-id="cb3bb-223">**IPropertyStore**</span><span class="sxs-lookup"><span data-stu-id="cb3bb-223">**IPropertyStore**</span></span>](/windows/win32/api/propsys/nn-propsys-ipropertystore) |
|----------------------------|------------------------------------|-------------------------------------------------|
| <span data-ttu-id="cb3bb-224">Permitir escritura</span><span class="sxs-lookup"><span data-stu-id="cb3bb-224">Allow write</span></span>                | <span data-ttu-id="cb3bb-225">No</span><span class="sxs-lookup"><span data-stu-id="cb3bb-225">No</span></span>                                 | <span data-ttu-id="cb3bb-226">Sí</span><span class="sxs-lookup"><span data-stu-id="cb3bb-226">Yes</span></span>                                             |
| <span data-ttu-id="cb3bb-227">Mezclar contenido y propiedades</span><span class="sxs-lookup"><span data-stu-id="cb3bb-227">Mix content and properties</span></span> | <span data-ttu-id="cb3bb-228">Sí</span><span class="sxs-lookup"><span data-stu-id="cb3bb-228">Yes</span></span>                                | <span data-ttu-id="cb3bb-229">No</span><span class="sxs-lookup"><span data-stu-id="cb3bb-229">No</span></span>                                              |
| <span data-ttu-id="cb3bb-230">Entornos</span><span class="sxs-lookup"><span data-stu-id="cb3bb-230">Multilingual</span></span>               | <span data-ttu-id="cb3bb-231">Sí</span><span class="sxs-lookup"><span data-stu-id="cb3bb-231">Yes</span></span>                                | <span data-ttu-id="cb3bb-232">No</span><span class="sxs-lookup"><span data-stu-id="cb3bb-232">No</span></span>                                              |
| <span data-ttu-id="cb3bb-233">Emitir vínculos</span><span class="sxs-lookup"><span data-stu-id="cb3bb-233">Emit links</span></span>                 | <span data-ttu-id="cb3bb-234">Sí</span><span class="sxs-lookup"><span data-stu-id="cb3bb-234">Yes</span></span>                                | <span data-ttu-id="cb3bb-235">No</span><span class="sxs-lookup"><span data-stu-id="cb3bb-235">No</span></span>                                              |
| <span data-ttu-id="cb3bb-236">MIME</span><span class="sxs-lookup"><span data-stu-id="cb3bb-236">MIME</span></span>                       | <span data-ttu-id="cb3bb-237">Sí</span><span class="sxs-lookup"><span data-stu-id="cb3bb-237">Yes</span></span>                                | <span data-ttu-id="cb3bb-238">No</span><span class="sxs-lookup"><span data-stu-id="cb3bb-238">No</span></span>                                              |
| <span data-ttu-id="cb3bb-239">Límites de texto</span><span class="sxs-lookup"><span data-stu-id="cb3bb-239">Text boundaries</span></span>            | <span data-ttu-id="cb3bb-240">Oración, párrafo, capítulo</span><span class="sxs-lookup"><span data-stu-id="cb3bb-240">Sentence, paragraph, chapter</span></span>       | <span data-ttu-id="cb3bb-241">None</span><span class="sxs-lookup"><span data-stu-id="cb3bb-241">None</span></span>                                            |
| <span data-ttu-id="cb3bb-242">Cliente/servidor</span><span class="sxs-lookup"><span data-stu-id="cb3bb-242">Client / server</span></span>            | <span data-ttu-id="cb3bb-243">Ambos</span><span class="sxs-lookup"><span data-stu-id="cb3bb-243">Both</span></span>                               | <span data-ttu-id="cb3bb-244">Remoto</span><span class="sxs-lookup"><span data-stu-id="cb3bb-244">Client</span></span>                                          |
| <span data-ttu-id="cb3bb-245">Implementación</span><span class="sxs-lookup"><span data-stu-id="cb3bb-245">Implementation</span></span>             | <span data-ttu-id="cb3bb-246">Complex</span><span class="sxs-lookup"><span data-stu-id="cb3bb-246">Complex</span></span>                            | <span data-ttu-id="cb3bb-247">Simple</span><span class="sxs-lookup"><span data-stu-id="cb3bb-247">Simple</span></span>                                          |

<span data-ttu-id="cb3bb-248">**Controladores de propiedades**  Los controladores de propiedades son componentes que leen y escriben propiedades para un formato de archivo determinado.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-248">**Property Handlers**  Property handlers are components that read and write properties for a particular file format.</span></span> <span data-ttu-id="cb3bb-249">Tienen acceso a los elementos y emiten las propiedades del recopilador de la misma manera que los filtros para el contenido.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-249">They access items and emit properties for the gatherer in the same way that filters do for content.</span></span> <span data-ttu-id="cb3bb-250">Los controladores de propiedades son más fáciles de implementar que los filtros.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-250">Property handlers are easier to implement than filters.</span></span> <span data-ttu-id="cb3bb-251">Si un formato de archivo basado en texto es muy sencillo o se espera que los archivos sean muy pequeños, el controlador de propiedades puede emitir propiedades y contenido.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-251">If a text-based file format is very simple or the files are expected to be very small, the property handler can emit both properties and content.</span></span>

> [!NOTE]  
> <span data-ttu-id="cb3bb-252">Los controladores de propiedades no son componentes de Windows Search; son componentes relacionados con el formato de archivo específico al que están diseñados para tener acceso.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-252">Property handlers are not Windows Search components; they are components related to the specific file format they are designed to access.</span></span> <span data-ttu-id="cb3bb-253">Para obtener más información sobre los controladores de propiedades y cómo implementar uno para un formato de archivo personalizado, vea [desarrollar controladores de propiedades para Windows Search](-search-3x-wds-extidx-propertyhandlers.md).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-253">For more information on property handlers and how to implement one for a custom file format, see [Developing Property Handlers for Windows Search](-search-3x-wds-extidx-propertyhandlers.md).</span></span>

<span data-ttu-id="cb3bb-254">**Propiedades** de Windows Search proporciona un [sistema de propiedades](https://msdn.microsoft.com/library/bb763010(VS.85).aspx) que incluye una gran biblioteca de propiedades.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-254">**Properties** Windows Search provides a [property system](https://msdn.microsoft.com/library/bb763010(VS.85).aspx) that includes a large library of properties.</span></span> <span data-ttu-id="cb3bb-255">Cualquier propiedad puede aparecer en cualquier elemento tal y como se define en el filtro o en el controlador de propiedades.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-255">Any property can appear on any item as defined by the filter or property handler.</span></span> <span data-ttu-id="cb3bb-256">Si tiene un formato de archivo personalizado, puede asignar las propiedades del formato de archivo a estas propiedades del sistema, y puede crear nuevas propiedades personalizadas.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-256">If you have a custom file format, you can map your file format's properties to these system properties, and you can create new custom properties.</span></span> <span data-ttu-id="cb3bb-257">Cuando el filtro o el controlador de propiedades emite estas propiedades, el recopilador actualiza el índice para que los usuarios puedan buscar con sus propiedades.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-257">When your filter or property handler emits these properties, the gatherer updates the index so users can search using your properties.</span></span> <span data-ttu-id="cb3bb-258">Para obtener más información sobre cómo crear y registrar propiedades personalizadas para un formato de archivo, vea [sistema de propiedades](../properties/building-property-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-258">For more information on creating and registering custom properties for a file format, see [Property System](../properties/building-property-handlers.md).</span></span>

<span data-ttu-id="cb3bb-259">**SystemIndex**  El índice, denominado SystemIndex, almacena los datos indexados y se compone de un almacén de propiedades e índices sobre las propiedades y el contenido de las propiedades de los elementos, y un índice invertido para el contenido y las propiedades de texto.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-259">**SystemIndex**  The index, called SystemIndex, stores indexed data and is composed of a property store and indices over the properties and content for item properties, and an inverted index for textual content and properties.</span></span> <span data-ttu-id="cb3bb-260">Una vez que el recopilador actualiza el índice, la búsqueda de Windows y otras aplicaciones pueden consultar el índice.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-260">After the gatherer updates the index, the index can be queried by Windows Search and other applications.</span></span> <span data-ttu-id="cb3bb-261">Para obtener más información sobre las formas de consultar el índice, vea [consultar el índice mediante programación](-search-3x-wds-qryidx-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-261">For more information on ways to query the index, see [Querying the Index Programmatically](-search-3x-wds-qryidx-overview.md).</span></span>

> [!NOTE]  
> <span data-ttu-id="cb3bb-262">Recuerde que, al volver a registrar un esquema, el indizador no respeta los cambios realizados en los atributos de propiedades definidas previamente.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-262">Remember that when you re-register a schema, changes made to attributes of previously defined properties may not be respected by the indexer.</span></span> <span data-ttu-id="cb3bb-263">La solución consiste en volver a generar el índice o introducir nuevas propiedades que reflejen los cambios en lugar de actualizar los anteriores (no se recomienda).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-263">The solution is either to rebuild the index, or introduce new properties that reflect the changes instead of updating old ones (not recommended).</span></span> <span data-ttu-id="cb3bb-264">Para obtener más información, vea [Nota para los implementadores](#notes-to-implementers) en [propiedades información general del sistema](../properties/property-system-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cb3bb-264">For more information, see [Note to Implementers](#notes-to-implementers) in [Properties System Overview](../properties/property-system-overview.md).</span></span>

## <a name="how-indexing-is-scheduled"></a><span data-ttu-id="cb3bb-265">Cómo se programa la indexación</span><span class="sxs-lookup"><span data-stu-id="cb3bb-265">How Indexing is Scheduled</span></span>

<span data-ttu-id="cb3bb-266">Cuando Windows Search se instala por primera vez, realiza una indexación completa del ámbito de rastreo, en pausa durante períodos de gran actividad de e/s y del usuario.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-266">When Windows Search is first installed, it performs a full indexing of the crawl scope, pausing during periods of high I/O and user activity.</span></span> <span data-ttu-id="cb3bb-267">El ámbito de rastreo predeterminado consta de las ubicaciones predeterminadas de la biblioteca, como **documentos**, **música**, **imágenes** y **vídeos**.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-267">The default crawl scope consists of the default library locations, such as **Documents**, **Music**, **Pictures**, and **Videos**.</span></span> <span data-ttu-id="cb3bb-268">Las notificaciones se procesan incluso antes de que finalice el rastreo inicial.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-268">Notifications are processed even before the initial crawl is finished.</span></span> <span data-ttu-id="cb3bb-269">En ocasiones, el recopilador rastrea las direcciones URL del ámbito de rastreo completo.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-269">Occasionally, the gatherer crawls the URLs from the full crawl scope.</span></span> <span data-ttu-id="cb3bb-270">Estos rastreos completos garantizan que los datos del índice estén actualizados.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-270">These full crawls ensure that the data in the index is fresh.</span></span> <span data-ttu-id="cb3bb-271">Por ejemplo, si un proveedor de notificaciones no puede enviar notificaciones o si el servicio de Windows Search finaliza de forma inesperada, el recopilador no tendrá ningún conocimiento de los elementos nuevos o modificados y no indizará estos elementos.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-271">For example, if a notification provider fails to send notifications or if the Windows Search service is terminated unexpectedly, the gatherer would have no knowledge of new or changed items and would not index these items.</span></span> <span data-ttu-id="cb3bb-272">Hay dos tipos de orígenes: solo notificación y notificación habilitada.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-272">There are two kinds of sources: notification only and notification enabled.</span></span> <span data-ttu-id="cb3bb-273">En ambos orígenes, el recopilador rastrea inicialmente el índice.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-273">In both sources, the gatherer initially crawls the index.</span></span> <span data-ttu-id="cb3bb-274">Después del rastreo inicial, los orígenes de solo notificación nunca realizarán un rastreo completo de nuevo a menos que se produzca un error, como el [diario de cambios de USN](/windows/desktop/FileIO/change-journals) que se revierte.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-274">After the initial crawl, the notification-only sources will never do a full crawl again unless there is a failure, such as the [USN Change Journal](/windows/desktop/FileIO/change-journals) rolling over.</span></span> <span data-ttu-id="cb3bb-275">Los orígenes habilitados para notificaciones realizan un rastreo incremental cuando se inicia el indexador, pero después escuchan las notificaciones mientras se ejecutan.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-275">Notification-enabled sources do an incremental crawl when the indexer is started, but then listen to notifications while running.</span></span> <span data-ttu-id="cb3bb-276">NTFS y Microsoft Outlook son solo notificaciones.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-276">NTFS and Microsoft Outlook are notification only.</span></span> <span data-ttu-id="cb3bb-277">Internet Explorer y FAT están habilitadas para notificaciones.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-277">Internet Explorer and FAT are notification enabled.</span></span>

## <a name="notes-to-implementers"></a><span data-ttu-id="cb3bb-278">Notas a los implementadores</span><span class="sxs-lookup"><span data-stu-id="cb3bb-278">Notes to Implementers</span></span>

<span data-ttu-id="cb3bb-279">La calidad de los datos en el índice y la eficacia del proceso de indexación dependen en gran medida de la implementación del controlador de propiedades y el filtro.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-279">The quality of the data in the index and the efficiency of the indexing process depend largely on your filter and property handler implementation.</span></span> <span data-ttu-id="cb3bb-280">Dado que se llama al filtro cada vez que una dirección URL identifica el formato de archivo, el proceso de indexación puede reducirse drásticamente si el filtro es ineficaz.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-280">Because the filter is called every time a URL identifies your file format, the indexing process can slow down dramatically if your filter is inefficient.</span></span> <span data-ttu-id="cb3bb-281">Si el controlador de propiedad no asigna correctamente todas las propiedades de archivo a las propiedades del sistema o no emite correctamente estas propiedades, los datos del índice serán incorrectos y las búsquedas posteriores de esas propiedades devolverán resultados incorrectos.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-281">If your property handler doesn't correctly map all file properties to system properties or doesn't correctly emit these properties, the data in the index will be incorrect and later searches for those properties will return incorrect results.</span></span> <span data-ttu-id="cb3bb-282">Si se produce un error en el controlador de filtro o propiedad, el indexador no podrá indizar los datos.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-282">If your filter or property handler fails, the indexer won't be able to index data.</span></span>

<span data-ttu-id="cb3bb-283">Las aplicaciones y los procesos distintos de Windows Search se basan en los controladores de protocolo, filtros y controladores de propiedades.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-283">Applications and processes other than Windows Search rely on protocol handlers, filters, and property handlers.</span></span> <span data-ttu-id="cb3bb-284">Las implementaciones pueden afectar a las aplicaciones de la manera que pueda no esperar.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-284">Your implementations can affect those applications in ways you may not expect.</span></span> <span data-ttu-id="cb3bb-285">La [Guía de desarrollo de Windows Search](-search-developers-guide-entry-page.md) proporciona consejos sobre las opciones de diseño y la prueba de cada uno de estos componentes.</span><span class="sxs-lookup"><span data-stu-id="cb3bb-285">The [Windows Search Development Guide](-search-developers-guide-entry-page.md) provides advice on design choices and on testing each of these components.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cb3bb-286">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="cb3bb-286">Related topics</span></span>

[<span data-ttu-id="cb3bb-287">Indexación, consulta y notificaciones en Windows Search</span><span class="sxs-lookup"><span data-stu-id="cb3bb-287">Indexing, Querying and Notifications in Windows Search</span></span>](-search-3x-wds-included-in-index.md)

[<span data-ttu-id="cb3bb-288">Qué se incluye en el índice</span><span class="sxs-lookup"><span data-stu-id="cb3bb-288">What is Included in the Index</span></span>](-search-indexing-process-overview.md)

[<span data-ttu-id="cb3bb-289">Consulta del proceso en Windows Search</span><span class="sxs-lookup"><span data-stu-id="cb3bb-289">Querying Process in Windows Search</span></span>](querying-process--windows-search-.md)

[<span data-ttu-id="cb3bb-290">Proceso de notificaciones en Windows Search</span><span class="sxs-lookup"><span data-stu-id="cb3bb-290">Notifications Process in Windows Search</span></span>](-search-3x-wds-support.md)

[<span data-ttu-id="cb3bb-291">Requisitos de formato de dirección URL</span><span class="sxs-lookup"><span data-stu-id="cb3bb-291">URL Formatting Requirements</span></span>](url-formatting-requirements.md)
