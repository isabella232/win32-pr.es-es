---
description: Los requisitos de contexto se expresan como una combinación de marcas de bits que se pasan a la función InitializeSecurityContext (General) o AcceptSecurityContext (General).
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: Requisitos de contexto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86af5f71557bdd53229b5c8ed6afc14dc24edb46
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/13/2021
ms.locfileid: "127161013"
---
# <a name="context-requirements"></a>Requisitos de contexto

Los requisitos de contexto se expresan como una combinación de marcas de bits que se pasan a la función [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) o [**AcceptSecurityContext (General).**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) Estas marcas afectan al [*contexto*](/windows/desktop/SecGloss/c-gly) de varias maneras. No todas las marcas se aplican a todos los contextos. Algunas solo son válidas para el servidor y otras solo para el cliente.

El autor de la llamada usa el parámetro *fContextReq* de la llamada [**a InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) o [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) para especificar un conjunto de marcas que indican las funcionalidades necesarias. Cuando la función vuelve, el *parámetro pfContextAttr* indica los atributos del contexto establecido. El autor de la llamada determina si los atributos de contexto finales son aceptables.

Las marcas solicitadas o devueltas por [**InitializeSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) tienen el prefijo ISC. Los solicitados o devueltos [**por AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) tienen el prefijo ASC. Las marcas que se pasan a una función incluyen REQ, mientras que las marcas devueltas incluyen RET. Por ejemplo, una marca de solicitud para la autenticación mutua pasada a **InitializeSecurityContext (general)** es ISC \_ REQ \_ MUTUAL \_ AUTH. Un servidor que solicita autenticación mutua pasa ASC \_ REQ \_ MUTUAL \_ AUTH a **AcceptSecurityContext (general).** Si se logra la autenticación mutua, **InitializeSecurityContext (general)** devuelve ISC RET MUTUAL AUTH y \_ \_ \_ **AcceptSecurityContext (general)** devuelve ASC \_ RET MUTUAL \_ \_ AUTH. Si el autor de la [](/windows/desktop/SecGloss/s-gly) llamada solicita autenticación mutua, pero el paquete de seguridad indica que no se puede realizar, el autor de la llamada debe decidir si desea cancelar el contexto o continuar.

En la tabla siguiente se describen las distintas marcas de requisitos de contexto.



| Marca                             | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| DELEGADO<br/>              | El servidor de la aplicación de transporte puede crear nuevos contextos de seguridad que suplanten al cliente que otros servidores aceptarán como contextos del cliente. El delegado solo funciona si se establece MUTUAL \_ AUTH. DELEGATE solo es compatible actualmente con [*Kerberos.*](/windows/desktop/SecGloss/k-gly) Además, Kerberos solo delegará en un servidor que tenga la marca TRUSTED \_ FOR \_ DELEGATION. No use esta marca para la [*delegación restringida.*](/windows/desktop/SecGloss/c-gly)<br/> |
| AUTENTICACIÓN \_ MUTUA<br/>          | Las partes que se comunican deben autenticar sus identidades entre sí. Sin MUTUAL \_ AUTH, el cliente autentica su identidad en el servidor. Con MUTUAL \_ AUTH, el servidor también debe autenticar su identidad en el cliente.<br/> Cuando se usa el paquete de seguridad [*Schannel,*](/windows/desktop/SecGloss/s-gly) el servidor establece la constante **ASC \_ RET MUTUAL \_ \_ AUTH** solo en la última llamada a [**AcceptSecurityContext (Negotiate),**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)después de que la asignación de certificados se haya completado correctamente.<br/>           |
| REPLAY \_ DETECT<br/>        | El [*paquete de seguridad*](/windows/desktop/SecGloss/s-gly) detecta los paquetes reproducido y notifica al autor de la llamada si se ha reproducido un paquete. El uso de esta marca implica todas las condiciones especificadas por la marca INTEGRITY.<br/>                                                                                                                                                                                                                                                                                                                      |
| SEQUENCE \_ DETECT<br/>      | El contexto debe poder detectar la entrega fuera de orden de los paquetes más adelante a través de las funciones de soporte técnico de mensajes. El uso de esta marca implica todas las condiciones especificadas por la marca INTEGRITY.<br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| CONFIDENCIALIDAD<br/>       | El contexto puede proteger los datos mientras están en tránsito mediante las [**funciones EncryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) y [**DecryptMessage (General).**](/windows/win32/api/sspi/nf-sspi-decryptmessage) La marca CONFIDENTIALITY no funciona si el contexto generado es para la cuenta guest.<br/>                                                                                                                                                                                                                                                                                                      |
| USAR \_ CLAVE DE \_ SESIÓN<br/>     | Se debe [*negociar una*](/windows/desktop/SecGloss/s-gly) nueva clave de sesión.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| SOLICITUD \_ DE \_ CREDS<br/>    | Si el cliente es un usuario interactivo, el paquete de seguridad debe, si es posible, solicitar al usuario las credenciales [*adecuadas.*](/windows/desktop/SecGloss/c-gly)<br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| USO \_ DE \_ CREDS PROPORCIONADOS<br/>  | La información de credenciales específica del paquete está disponible en el búfer de entrada. El paquete de seguridad puede usar estas [*credenciales para*](/windows/desktop/SecGloss/c-gly) autenticar la conexión.<br/>                                                                                                                                                                                                                                                                                                                                                                |
| GUARDAR \_ \_ CREDS PROPORCIONADOS<br/> | Las credenciales proporcionadas deben almacenarse en caché con las credenciales complementarias.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ASIGNACIÓN \_ DE MEMORIA<br/>      | El [*paquete de seguridad*](/windows/desktop/SecGloss/s-gly) debe asignar memoria. El autor de la llamada debe llamar finalmente [**a la función FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) para liberar memoria asignada por el paquete de seguridad.<br/>                                                                                                                                                                                                                                                                                                                      |
| USAR \_ ESTILO \_ DCE<br/>       | El autor de la llamada espera una transacción de autenticación de [*tres etapas.*](/windows/desktop/SecGloss/t-gly)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| DATAGRAMA<br/>              | [*Se debe usar*](/windows/desktop/SecGloss/d-gly) la semántica del datagrama. Para obtener más información, vea [Contextos de datagramas](datagram-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| CONNECTION<br/>            | Se debe usar la semántica de conexión. Para obtener más información, vea [Contextos orientados a la conexión.](connection-oriented-contexts.md)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Stream<br/>                | Se debe usar la semántica de secuencias. Para obtener más información, vea [Stream Contexts](stream-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| \_ERROR EXTENDIDO<br/>       | Se deben generar mensajes de respuesta de error para el mismo nivel si se produce un error en el contexto.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| INTEGRIDAD<br/>             | Se puede comprobar la integridad del búfer, pero no se habilita la secuenciación ni la detección de respuestas.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| SIN \_ INTEGRIDAD<br/>         | Se omite el requisito **INTEGRITY.**<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| IDENTIFICAR<br/>              | Cuando un servidor suplanta un contexto que tiene esta marca establecida, esa suplantación produce un acceso extremadamente limitado. La suplantación con el conjunto IDENTIFY se usa para comprobar la identidad del cliente.<br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

