---
description: Se han realizado cambios significativos en el modelo de servicios para mejorar el rendimiento, la confiabilidad, la seguridad, la administración y la administración de los servicios.
ms.assetid: b1c09468-51e1-4ffd-bf07-6faa9f9336dd
title: Cambios de servicio para Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6ba96cc0c69e2bda4e19e7d093098c578e31c4b
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/13/2021
ms.locfileid: "127168902"
---
# <a name="service-changes-for-windows-vista"></a>Cambios de servicio para Windows Vista

Se han realizado cambios significativos en el modelo de servicios para mejorar el rendimiento, la confiabilidad, la seguridad, la administración y la administración de los servicios.

En la tabla siguiente se resumen las mejoras en los servicios para Windows Vista.



| Mejora                                                                                                                                                                                                  | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Inicio automático retrasado<br/>                                                                 | Los servicios de inicio automático retrasados se inician poco después de que se haya iniciado el sistema. Esto mejora el rendimiento de inicio del sistema a la vez que proporciona un inicio automático para estos servicios. Para establecer la marca de inicio automático retrasado, llame a la función [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con **SERVICE CONFIG \_ \_ DELAYED AUTO START \_ \_ \_ INFO**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Detección y recuperación de errores<br/>                 | Si se produce un error en un servicio, el administrador de control de servicios (SCM) puede realizar una acción de error, como reiniciar el servicio en un intento de recuperarse de ese error. Para configurar una acción de error, llame a [**ChangeServiceConfig2 con**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) **SERVICE CONFIG FAILURE \_ \_ \_ ACTIONS**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Notificaciones de apagado previo<br/>                                     | Un servicio puede registrarse para recibir una notificación **\_ SERVICE CONTROL \_ PRESHUTDOWN** en su [*función HandlerEx*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) antes de recibir la notificación de apagado real. Esto proporciona a los servicios un procedimiento de apagado largo más tiempo para cerrarse correctamente. Para establecer el valor de tiempo de espera, llame [**a ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con **SERVICE CONFIG \_ \_ PRESHUTDOWN \_ INFO**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Acceso de red restringido<br/>                                     | Puede usar SID de servicio para restringir el acceso a puertos, protocolos o la dirección del tráfico de red. Para restringir el acceso de un servicio a la red, use la [**interfaz INetFwServiceRestriction.**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Ejecución con privilegios mínimos<br/>                         | Los servicios se pueden ejecutar en cualquier cuenta que contenga los privilegios necesarios (LocalService, NetworkService, LocalSystem, una cuenta de dominio o una cuenta local) e indicar los privilegios necesarios llamando a [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con **SERVICE CONFIG REQUIRED \_ \_ \_ PRIVILEGES \_ INFO**. El SCM quita los privilegios que no son necesarios.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Aislamiento de servicio<br/>                                                                     | Un servicio puede aislar objetos, como archivos o claves del Registro, para su uso exclusivo protegiendolos con una entrada de control de acceso que contiene un SID de servicio. Una vez asignado este SID a un servicio, el propietario del servicio puede modificar las listas de control de acceso de los objetos para conceder acceso al SID. Esto permite que un servicio acceda a objetos específicos sin ejecutarse con una cuenta con privilegios elevados ni reducir la seguridad de los objetos. Para establecer el SID del servicio, llame a [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con **SERVICE CONFIG SERVICE \_ \_ \_ SID \_ INFO**.<br/>                                                                                                                                                                                                                                     |
| <span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Notificaciones de cambio de estado de servicio<br/> | Los servicios se pueden registrar para recibir una notificación cuando se crea, elimina un servicio o tiene un cambio de estado mediante la [**función NotifyServiceStatusChange.**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) Esto es más eficaz que llamar a [**la función QueryServiceStatusEx**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) en un bucle para sondear el estado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Aislamiento de sesión 0<br/>                                                             | Los servicios siempre se han ejecutado en la sesión 0. Antes Windows Vista, el primer usuario que inicia sesión también se asignó a la sesión 0. Ahora, la sesión 0 se reserva exclusivamente para los servicios y otras aplicaciones que no están asociadas a una sesión de usuario interactiva. (El primer usuario que inicia sesión está conectado a la sesión 1, el segundo usuario que inicia sesión está conectado a la sesión 2, y así sucesivamente). La sesión 0 no admite procesos que interactúen con el usuario.<br/> Este cambio significa que un servicio no puede publicar o enviar un mensaje a una aplicación y una aplicación no puede enviar ni publicar un mensaje en un servicio. Además, los servicios no pueden mostrar directamente un elemento de interfaz de usuario, como un cuadro de diálogo. Un servicio puede usar la [**función WTSSendMessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) para mostrar un cuadro de diálogo en otra sesión.<br/> |



 

## <a name="related-topics"></a>Temas relacionados

<dl> <dt>

[Servicios](services.md)
</dt> </dl>

 

