---
title: Consideraciones de seguridad Windows Interfaz de usuario
description: En este tema se proporciona información sobre las consideraciones de seguridad en el Windows Interfaz de usuario.
ms.assetid: D560E59A-D6C8-40a9-AABB-DE5A47C94E6E
keywords:
- Windows Interfaz de usuario,security
- seguridad para Windows Interfaz de usuario
- seguridad de cadena
- entrada del usuario, validación
- validar las entradas del usuario
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 71b714de3ab12cb10d6e5d9a2e251c34eeeff7a5
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/13/2021
ms.locfileid: "127170194"
---
# <a name="security-considerations-windows-user-interface"></a>Consideraciones de seguridad: Windows Interfaz de usuario

En este tema se proporciona información sobre las consideraciones de seguridad en el Windows Interfaz de usuario. En este tema no se proporciona todo lo que necesita saber sobre los problemas de seguridad. En su lugar, úselo como punto de partida y referencia para esta área tecnológica.

Con el aumento de la interconectividad del equipo, los desarrolladores ahora deben preocuparse por la seguridad de las aplicaciones. Sin embargo, la seguridad también mejora la seguridad general de las aplicaciones y la solidez. por lo tanto, es otra manera de que el desarrollador pueda proporcionar una buena experiencia de usuario. En los temas siguientes se tratan algunos posibles problemas de seguridad al usar el Windows Interfaz de usuario.

-   [Consideraciones sobre cadenas](#string-considerations)
-   [Entrada del usuario](#user-input)
-   [alertas de seguridad](#security-alerts)
-   [Temas relacionados](#related-topics)

## <a name="string-considerations"></a>Consideraciones sobre cadenas

Muchas funciones, mensajes y macros usan cadenas en sus parámetros. Sin embargo, a menudo no se comprueba si las cadenas tienen terminación NULL o longitud. Un problema relacionado es lacalculación errónea de la longitud de una cadena o búfer. En cualquier caso, esto puede provocar un desbordamiento del búfer o un truncamiento de datos, lo que puede afectar negativamente a la aplicación. Para obtener más información sobre las saturaciones del búfer y otras cuestiones de seguridad, vea *Writing Secure Code* (Escritura de código seguro) de Michael Howard y David Lecost, Microsoft Press, 2002.

Para controlar las cadenas de forma segura, debe hacer lo siguiente:

-   Compruebe las cadenas para la terminación null o para la longitud adecuada, según corresponda.
-   Debe tener especial cuidado para determinar la longitud de una cadena o búfer, especialmente cuando contiene **valores TCHAR.**
-   Si crea una cadena o usa una cadena que se usó anteriormente, inicialíctela en cero o inserte un terminador null, según corresponda.

Además, considere la posibilidad de usar [las funciones StrSafe](/windows/desktop/menurc/strsafe-ovw) al tratar con cadenas. Estas funciones están diseñadas para controlar las cadenas de forma segura.

## <a name="user-input"></a>Entrada del usuario

La Windows de usuario está relacionada con la obtención y respuesta a la información de los usuarios. Sin embargo, los usuarios que escriben datos incorrectos pueden interrumpir la aplicación, independientemente de si pretenden hacerlo o no. Por lo tanto, la regla cardinal es que se deben validar todas las entradas.

El principal problema son los datos de cadena, que se deba a las [consideraciones de cadena.](#string-considerations) Sin embargo, todos los tipos de entrada deben validarse antes de que la aplicación los utilice. Otro problema es cuando los datos se validan en un momento dado, pero cambian antes de que se utilicen, por ejemplo, al recibir mensajes que dan la longitud del texto. Por lo tanto, si existe la posibilidad de que los datos cambien, debe comprobar los datos justo antes de usarlos.

## <a name="security-alerts"></a>Alertas de seguridad

En la tabla siguiente se enumeran las características que, si se usan incorrectamente, pueden poner en peligro la seguridad de las aplicaciones.



| Característica                                                                                                                                                   | Mitigación                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**GetAtomName**](/windows/desktop/api/winbase/nf-winbase-getatomnamea)                                                                                                               | Tenga cuidado al especificar el tamaño del búfer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [**GlobalGetAtomName**](/windows/desktop/api/winbase/nf-winbase-globalgetatomnamea)                                                                                                   | Los átomos de cadena globales son accesibles para cualquier aplicación. Sin embargo, si otra aplicación no tiene cuidado, podría tratar incorrectamente sus recuentos de referencias y eliminarlos. En su lugar, debe considerar la posibilidad de usar los átomos enteros globales.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [**ImpersonateDdeClientWindow**](/windows/desktop/api/dde/nf-dde-impersonateddeclientwindow)                                                                                 | Si se produce un error en la función, se realizan solicitudes de cliente posteriores en el contexto de seguridad del proceso de llamada. Esto puede ser un problema si el proceso de llamada se ejecuta como una cuenta con privilegios elevados. Por lo tanto, si se produce un error en la llamada o se produce un error, no continúe la ejecución de la solicitud de cliente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**DdeImpersonateClient**](/windows/desktop/api/ddeml/nf-ddeml-ddeimpersonateclient)                                                                                             | Si se produce un error en la función, se realizan solicitudes de cliente posteriores en el contexto de seguridad del proceso de llamada. Esto puede ser un problema si el proceso de llamada se ejecuta como una cuenta con privilegios elevados. Por lo tanto, si se produce un error en la llamada o se produce un error, no continúe la ejecución de la solicitud de cliente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**GetClipboardFormatName**](/windows/desktop/api/winuser/nf-winuser-getclipboardformatnamea)                                                                                         | Lacalización errónea del tamaño adecuado del búfer *lpszFormatName,* especialmente cuando la aplicación se usa en las versiones ANSI y Unicode, puede provocar un desbordamiento del búfer. Además, tenga en cuenta que la cadena se trunca si es mayor que el parámetro *cchMaxCount,* lo que puede provocar la pérdida de información.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [**GetMenuString**](/windows/desktop/api/winuser/nf-winuser-getmenustringa)                                                                                                           | El *parámetro lpString* es un **búfer TCHAR** y *nMaxCount* es la longitud de la cadena de menú en **TCHAR.** El ajuste de tamaño de estos parámetros incorrectamente puede ser la longitud de la cadena de menú en caracteres. El ajuste de tamaño incorrecto de estos parámetros puede provocar el truncamiento de la cadena, lo que conduce a una posible pérdida de datos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [**GetStringTypeA,**](/windows/desktop/api/winnls/nf-winnls-getstringtypea) [**GetStringTypeEx,**](/windows/win32/api/stringapiset/nf-stringapiset-getstringtypeexw) [**GetStringTypeW**](/windows/desktop/api/stringapiset/nf-stringapiset-getstringtypew) | Para evitar un desbordamiento de búfer, establezca el tamaño del búfer *lpCharType* correctamente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya)                                                                                                                       | El **uso incorrecto de LoadLibrary** puede poner en peligro la seguridad de la aplicación al cargar el archivo DLL incorrecto.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [**LoadString**](/windows/desktop/api/winuser/nf-winuser-loadstringa)                                                                                                                 | El uso incorrecto incluye la especificación del tamaño incorrecto en el *parámetro nBufferMax.* Por ejemplo, sizeof(*lpBuffer*) proporciona el tamaño del búfer en bytes, lo que podría provocar un desbordamiento del búfer para la versión Unicode de la función. Las situaciones de desbordamiento de búfer son la causa de muchos problemas de seguridad en las aplicaciones. En este caso, el `sizeof(lpBuffer)/sizeof(TCHAR)` uso de proporciona el tamaño adecuado del búfer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**lstrcat**](/windows/desktop/api/winbase/nf-winbase-lstrcata)                                                                                                                       | Esta función usa el control estructurado de excepciones (SEH) para detectar infracciones de acceso y otros errores. Cuando esta función detecta errores SEH, devuelve **NULL** sin terminación NULL de la cadena y sin NULL sin terminar la cadena y sin notificar el error al autor de la llamada. El autor de la llamada no es seguro asumir que el espacio insuficiente es la condición de error. El primer argumento, *lpString1,* debe ser lo suficientemente grande como para contener *lpString2* y el cierre '0'; de lo contrario, puede producirse una saturación \\ del búfer. Las saturaciones del búfer pueden provocar un ataque por denegación de servicio contra la aplicación si se produce una infracción de acceso. En el peor de los casos, una saturación del búfer puede permitir que un atacante inyecte código ejecutable en el proceso, especialmente si *lpString1* es un búfer basado en la pila. Considere la posibilidad de usar una de las siguientes alternativas. [**StringCbCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcbcata) o [**StringCchCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcata).                                                                                                                                                                                       |
| [**lstrcpy**](/windows/desktop/api/winbase/nf-winbase-lstrcpya)                                                                                                                       | Esta función usa el control estructurado de excepciones (SEH) para detectar infracciones de acceso y otros errores. Cuando esta función detecta errores SEH, devuelve **NULL** sin terminación NULL de la cadena y sin NULL sin terminar la cadena y sin notificar el error al autor de la llamada. El autor de la llamada no es seguro asumir que el espacio insuficiente es la condición de error. El primer argumento, *lpString1,* debe ser lo suficientemente grande como para contener *lpString2* y el cierre '0'; de lo contrario, puede producirse una saturación \\ del búfer. Las saturaciones del búfer pueden provocar un ataque por denegación de servicio contra la aplicación si se produce una infracción de acceso. En el peor de los casos, una saturación del búfer puede permitir que un atacante inyecte código ejecutable en el proceso, especialmente si *lpString1* es un búfer basado en la pila. Considere la posibilidad [**de usar StringCchCopy en**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) su lugar.                                                                                                                                                                                                                                                               |
| [**lstrcpyn**](/windows/desktop/api/winbase/nf-winbase-lstrcpyna)                                                                                                                     | Esta función usa el control estructurado de excepciones (SEH) para detectar infracciones de acceso y otros errores. Cuando esta función detecta errores SEH, devuelve **NULL** sin terminación NULL de la cadena y sin NULL sin terminar la cadena y sin notificar el error al autor de la llamada. El autor de la llamada no es seguro asumir que el espacio insuficiente es la condición de error. Si *lpString1* no es lo suficientemente grande como para contener la cadena copiada, puede producirse una saturación del búfer. Además, al copiar una cadena completa, tenga en cuenta que [sizeof](https://msdn.microsoft.com/library/0w557fh7(VS.71).aspx) devuelve el número de bytes en lugar de **WCHAR,** que **sizeof** devuelve el número de bytes en lugar de caracteres, lo que es incorrecto para la versión Unicode de esta función. Las saturaciones del búfer pueden provocar un ataque por denegación de servicio contra la aplicación si se produce una infracción de acceso. En el peor de los casos, una saturación del búfer puede permitir que un atacante inyecte código ejecutable en el proceso, especialmente si *lpString1* es un búfer basado en la pila. Considere la posibilidad [**de usar StringCchCopy en**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) su lugar. |
| [**lstrlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena)                                                                                                                       | [**lstrlen supone**](/windows/desktop/api/winbase/nf-winbase-lstrlena) que *lpString* es una cadena terminada en NULL. Si no es así, esto podría provocar una saturación del búfer o un ataque por denegación de servicio contra la aplicación. Considere la posibilidad de usar una de las siguientes alternativas. [**StringCbLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcblengtha) o [**StringCchLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcchlengtha).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**wsprintf**](/windows/desktop/api/winuser/nf-winuser-wsprintfa)                                                                                                                     | No se garantiza que la cadena devuelta *en lpOut* termine en null. Además, evite el formato %s, lo que puede provocar una saturación del búfer. Si se produce una infracción de acceso, se produce una denegación de servicio en la aplicación. En el peor de los casos, un atacante puede insertar código ejecutable. Considere la posibilidad de usar una de las siguientes alternativas. [**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintfEx, StringCchVPrintfEx,**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa) [**StringCchVPrintf o**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa) [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa). [](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa)                                                                                                                                                                                                                                                                                                                                         |
| [**wvsprintf**](/windows/desktop/api/winuser/nf-winuser-wvsprintfa)                                                                                                                   | No se garantiza que la cadena devuelta *en lpOutput* termine en null. Además, evite el uso del formato %s, lo que puede provocar una saturación del búfer. Esto puede provocar una denegación de servicio si produce una infracción de acceso o un atacante puede insertar código ejecutable. Considere la posibilidad de usar una de las siguientes alternativas. [**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintfEx, StringCchVPrintfEx,**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa) [**StringCchVPrintf o**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa) [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa). [](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa)                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="related-topics"></a>Temas relacionados

<dl> <dt>

[Seguridad de Microsoft](https://www.microsoft.com/security/)
</dt> <dt>

[Identidad y seguridad](/windows/desktop/security)
</dt> <dt>

[Índice de los how tos de seguridad](/previous-versions/msp-n-p/ff650055(v=pandp.10))
</dt> <dt>

[Recursos de seguridad de TechNet](https://www.microsoft.com/technet/security/default.mspx)
</dt> <dt>

[Procedimientos recomendados para las API de seguridad](/windows/desktop/SecBP/best-practices-for-the-security-apis)
</dt> </dl>

 

 