---
description: La versión de Windows Vista incluye un nuevo objeto de programación para el panel de entrada de Tablet PC que proporciona una nueva gama de posibilidades para cómo una aplicación puede usar e interactuar con el Panel de entrada.
ms.assetid: 539f41d3-5fb8-4e20-99ba-0d5af1f0cc54
title: TextInputPanel para usuarios de PenInputPanel
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9fd75fddb929dfd9e0e783aefc0d3f57743d23d5c35f23c845a9745660512f52
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/11/2021
ms.locfileid: "119222172"
---
# <a name="textinputpanel-for-users-of-peninputpanel"></a>TextInputPanel para usuarios de PenInputPanel

La versión de Windows Vista incluye un nuevo objeto de programación para el panel de entrada de Tablet PC que proporciona una nueva gama de posibilidades para cómo una aplicación puede usar e interactuar con el Panel de entrada. Por primera vez, los desarrolladores de aplicaciones pueden colocar el icono del panel de entrada de In-Place para que se alinee con un cuadro de texto o colocarlo en la esquina de una superficie de entrada de cliente para ofrecer acceso a un modo de entrada alternativo. Los desarrolladores tienen el mismo control sobre el posicionamiento una vez que el icono del panel de entrada se expande en el panel In-Place entrada. Esto permite garantizar que el Panel de entrada de In-Place nunca se superpone con los elementos clave de la interfaz de usuario en el diseño de una aplicación o incluso para volver a flujo de la interfaz de usuario de una aplicación para crear espacio para el panel de entrada de In-Place y, a continuación, colocarlo en el espacio reservado. Sin embargo, el nuevo modelo de programación incluye compatibilidad con algo más que posicionamiento, pero los desarrolladores también pueden personalizar el área de entrada, el modo de corrección y muchas otras propiedades del Panel de entrada para adaptar la experiencia de entrada de texto en una aplicación. Por último, por primera vez es posible que una aplicación reciba la entrada de lápiz del usuario, además del texto reconocido, asociado a las inserciones de texto del Panel de entrada. Esto permite nuevos escenarios de aplicación, incluida la entrada de lápiz en los registros de seguimiento de cambios, y permite a los usuarios editar o ver la entrada de lápiz en la aplicación. Estas nuevas características de programación son el resultado directo de los comentarios que Microsoft ha recibido sobre la historia del desarrollador del Panel de entrada y representan el primer paso hacia una integración más estrecha de las aplicaciones y el Panel de entrada.

Para proporcionar este modelo de programación del Panel de entrada enriquecido, el mecanismo existente para interactuar mediante programación con el Panel de entrada, el objeto [**PenInputPanel,**](peninputpanel-class.md) está en desuso y se reemplaza por el nuevo [**objeto TextInputPanel.**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) Además de proporcionar nuevas características de programación, el objeto **TextInputPanel** también proporciona cerca de todas las funcionalidades de programación **del objeto PenInputPanel.** El **objeto TextInputPanel** se incluye tanto en Windows Vista como en Windows Kit para desarrolladores de software de Vista. El **objeto TextInputPanel** solo es compatible con el panel de entrada de Windows Vista y no se puede usar con el panel de entrada de Windows XP Service Pack 2 o anterior. La aplicación que se escribió anteriormente para usar el objeto **PenInputPanel** seguirá funcionando con el panel de entrada de Windows Vista; sin embargo, al escribir nuevas aplicaciones de tabletas, se recomienda encarecidamente a los desarrolladores que usen el nuevo objeto **TextInputPanel** en lugar del objeto **PenInputPanel** en desuso.

Cada una de las opciones de programación del [**objeto TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) se puede aplicar por campo de texto. Esto se logra adjuntando una instancia del objeto **TextInputPanel** mediante la [**propiedad AttachedEditWindow.**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_attachededitwindow) La propiedad debe establecerse en el identificador de ventana para el campo de texto.

> [!Note]  
> : algunos de los métodos y propiedades que se describen a continuación se aplican cuando el Panel de entrada está en el modo de interacción local y no cuando el Panel de entrada está en el modo de interacción flotante o acoplado. El modo de interacción local es el comportamiento del Panel de entrada, donde colocar el foco en un campo editable hace que el icono del panel de entrada aparezca junto al campo y pulsar en el icono del panel de entrada hace que el Panel de entrada se expanda. Los métodos y propiedades que solo se aplican cuando el Panel de entrada está en el modo de interacción local contienen "InPlace" en el nombre de método o propiedad.

 

## <a name="control-of-input-panel-icon-and-input-panel-visibility"></a>Control del icono del panel de entrada y visibilidad del panel de entrada

El primer aspecto del Panel de entrada sobre el que los desarrolladores de aplicaciones tienen más control en Windows Vista es su visibilidad. Con el [**objeto TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es posible controlar la visibilidad del panel de In-Place entrada de tres maneras. Con una combinación de propiedades y métodos, una aplicación puede determinar si se muestra el Panel de entrada de In-Place, cuándo se muestra el Panel de entrada de In-Place y si aparece primero como icono del panel de entrada o si se muestra expandido inmediatamente. Mediante la combinación de estas técnicas para controlar la visibilidad con las técnicas para controlar el posicionamiento que se debate en la sección siguiente, es posible que los desarrolladores de aplicaciones creen puntos de inicio personalizados y flujos de trabajo personalizados mediante el panel de entrada de In-Place en una aplicación.

> [!Note]  
> Las propiedades y los métodos analizados en esta sección solo se aplican cuando el Panel de entrada está en el In-Place de interacción.

 

En primer lugar y básicamente, es posible evitar que el panel de entrada de In-Place y el icono del panel de entrada aparezcan estableciendo la propiedad [**InPlaceVisibleOnFocus**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplacevisibleonfocus) en **false.** Si se establece en **true,** se revierte al valor predeterminado del sistema de que aparezca cuando sea posible, siempre que el usuario o el directiva de grupo no lo hayan deshabilitado. Esta opción es útil para las aplicaciones que incluyen soluciones de entrada de texto personalizadas como alternativa al Panel de entrada.

En segundo lugar, al establecer la propiedad [**DefaultInPlaceState,**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) un desarrollador puede especificar qué estado local, tal y como especifica la enumeración [**InPlaceState,**](/windows/win32/api/peninputpanel/ne-peninputpanel-inplacestate) el panel de entrada de In-Place aparece en cuando el foco se coloca en un campo de texto. El valor predeterminado del sistema es que el panel de entrada de In-Place aparezca en el estado de mantener el puntero a menos que el Panel de entrada ya esté visible en el estado expandido, en cuyo caso el Panel de entrada permanece expandido. Al establecer la propiedad **DefaultInPlaceState** en **InPlaceState \_ expandido,** el panel de entrada de In-Place siempre aparece expandido, en lugar de que el icono del panel de entrada aparezca primero y, a continuación, exija al usuario que pulse el icono del panel de entrada antes de expandir el Panel de entrada. Las otras dos opciones son **InPlaceState \_ Auto**, que es el comportamiento predeterminado del sistema y **InPlaceState \_ HoverTarget,** que siempre hace que aparezca el icono del panel de entrada. La capacidad de especificar que el panel In-Place entrada siempre aparece expandido es nuevo con el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) y no es posible con el [**objeto PenInputPanel.**](peninputpanel-class.md) En la ilustración siguiente se muestra el In-Place panel de entrada y los estados expandido del panel.

![icono del panel de entrada local y estados expandido](images/8ce866b6-9a45-499f-a3d1-95a1d34d6402.jpg)

Además de poder controlar el estado en contexto, también es posible que un desarrollador determine el estado en contexto en un momento dado mediante la obtención de la [**propiedad CurrentInPlaceState.**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate) **CurrentInPlaceState** es igual a [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) cuando el Panel de entrada no está visible, excepto cuando **DefaultInPlaceState** es **InPlaceState \_ Auto,** en cuyo caso **CurrentInPlaceState** se convierte en **InPlaceState \_ HoverTarget.** Los [**eventos InPlaceVisibilityChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging)  /  [**InPlaceVisibilityChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged) se pueden usar para realizar un seguimiento del estado de visibilidad del panel de In-Place entrada.

Por último, un desarrollador puede forzar que el panel In-Place entrada se oculte o se muestre mediante el [**método SetInPlaceVisibility.**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) Si el desarrollador ha establecido previamente la propiedad [**DefaultInPlaceState,**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) el Panel de entrada aparece en el estado especificado cuando se fuerza a mostrar. Una aplicación solo puede ocultar o mostrar el panel de entrada de In-Place cuando el foco está actualmente en la ventana a la que está asociado el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) y cuando el usuario no tiene abierto el Panel de entrada en otro modo de interacción, como acoplado o flotante. La capacidad de forzar que el panel In-Place entrada se oculte o se muestre también es nueva con el objeto **TextInputPanel** y no es posible mediante el [**objeto PenInputPanel.**](peninputpanel-class.md)

Estas opciones dan a los desarrolladores de aplicaciones un control preciso sobre cuándo aparece In-Place panel de entrada y en qué estado. Al personalizar el estado local predeterminado y controlar la visibilidad local independientemente de los cambios de foco, un desarrollador de aplicaciones puede crear un flujo de trabajo personalizado cuando el Panel de entrada responda a la configuración de la aplicación o a la entrada del usuario en una aplicación.

## <a name="absolute-positioning-of-input-panel-icon-and-input-panel"></a>Posición absoluta del icono del panel de entrada y el panel de entrada

Posiblemente, la característica nueva más atractiva que se encuentra en el [**objeto TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es el posicionamiento absoluto del panel In-Place entrada. Con esta nueva funcionalidad, un desarrollador de aplicaciones puede asegurarse de que In-Place Panel de entrada no se superponga con uno o varios elementos visuales clave en un diseño de aplicación. Con el [**objeto PenInputPanel**](peninputpanel-class.md) era posible colocar el panel de entrada de In-Place en relación con un campo de texto basado en un desplazamiento; sin embargo, el Panel de entrada todavía se ajustaba para mantenerse en la pantalla. Por primera vez en Vista, una aplicación puede colocar el panel In-Place entrada en una posición absoluta mediante coordenadas de pantalla. Además, la responsabilidad de mantener el Panel de entrada en la pantalla se deja al desarrollador de la aplicación, por lo que se quita la posibilidad de que el Panel de entrada se repositione automáticamente y aparentemente aleatoriamente.

> [!Note]  
> Las propiedades y los métodos analizados en esta sección solo se aplican cuando el Panel de entrada está en el In-Place de interacción.

 

Los dos métodos principales necesarios para colocar de forma In-Place panel de entrada son [**SetInPlacePosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) y [**SetInPlaceHoverTargetPosition.**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition) El primero se usa para especificar la ubicación del panel de entrada de In-Place y el segundo para especificar la ubicación del icono del panel de entrada para el panel de In-Place entrada. Si una aplicación decide establecer solo la ubicación del icono del panel de entrada y no la ubicación del Panel de entrada de In-Place, el Panel de entrada de In-Place aparece en la ubicación predeterminada determinada por el sistema. De forma similar, si una aplicación vuelve a colocar In-Place panel de entrada, pero no el icono del panel de entrada, el icono del panel de entrada aparece en la ubicación predeterminada. La ubicación se especifica en coordenadas de pantalla. El punto real que se coloca es la esquina superior izquierda del icono del panel de entrada o del panel de entrada sin ningún peine de corrección expandido. Cuando se expande el peine de corrección, el punto que se coloca no cambia. (Vea la figura 2 a continuación) No hay ninguna restricción en el lugar en el que el panel de entrada de In-Place y el icono del panel de entrada de In-Place pueden ser lugares y es responsabilidad de las aplicaciones que llaman a estos métodos mantenerlos en la pantalla. Ambos métodos son sincrónicos, lo que significa que el posicionamiento se produce antes de que el método vuelva. En el caso de que el Panel de entrada ya esté abierto en el modo de interacción flotante o acoplado, se produce un error al intentar colocar el panel de entrada de In-Place o el icono In-Place panel de entrada. Además, se producirá un error en los métodos si la ventana adjuntada al [**objeto TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) no tiene actualmente el foco.

Una llamada a [**SetInPlacePosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) o [**SetInPlaceHoverTargetPosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition) no hace que se muestre automáticamente el panel de entrada de In-Place o el icono del panel de entrada, simplemente establece la posición para la próxima vez que se muestren. La [**llamada a SetInPlaceVisibility**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) se puede usar para forzar que se muestren inmediatamente.

![medidas del panel de entrada local](images/0c67a77a-5d2f-489f-9357-b8a168d024d3.jpg)

Al colocar el panel In-Place entrada de datos, calcular si se va a salir de la pantalla puede ser un poco complicado. Para facilitar este proceso, hay varias propiedades del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) que se pueden usar para simplificar este proceso. Juntos, estas propiedades y eventos se pueden usar para determinar el tamaño exacto del panel de In-Place entrada en todos sus estados:

-   [**InPlaceBoundingRectangle:**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle)esta propiedad proporciona el rectángulo delimitador para el panel de entrada In-Place cuando se muestra el área de entrada más grande para el idioma de entrada actual. Si el Panel de escritura o el Panel de caracteres se determinan en el área de entrada más grande, se incluye el alto del botón Insertar. No incluye el alto del peine de corrección. Cuando el panel de entrada de In-Place crece automáticamente, se desencadena el par de eventos [**InPlaceSizeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging)  /  [**InPlaceSizeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged) y el valor de esta propiedad se actualiza para incluir el área de escritura adicional o la línea de escritura.
-   [**PopUpCorrectionHeight:**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_popupcorrectionheight)esta propiedad especifica el alto del peine de corrección posterior a la inserción cuando se coloca encima del Panel de entrada. Para obtener el alto completo del panel de entrada de In-Place con el peine de corrección posterior a la inserción emergente, agregue el alto de [**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle) a **PopUpCorrectionHeight**.

Como alternativa más sencilla a establecer la posición absoluta del panel de entrada de In-Place y el icono del panel de entrada, una aplicación solo puede especificar si el valor predeterminado del Panel de entrada de In-Place aparece por encima o debajo de un campo de entrada de texto. De este modo, es posible evitar la superposición de elementos en el diseño de la aplicación de una manera más flexible. Para ello, la aplicación establece [**PreferredInPlaceDirection**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_preferredinplacedirection) en **InPlaceDirection \_ Bottom** o **InPlaceDirection \_ Top.** La propiedad es una preferencia porque In-Place panel de entrada invalida la preferencia establecida por la aplicación cuando es necesario para mantener el Panel de entrada en la pantalla. El valor predeterminado del sistema es colocar el panel In-Place entrada debajo de un campo de texto cuando sea posible y, de lo contrario, colocarlo arriba. Si se **establece PreferredInPlaceDirection** en **InPlaceDirection \_ Auto,** se restaura el valor predeterminado del sistema.

Juntos, las propiedades, los métodos y los eventos del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) dan a los desarrolladores el control necesario sobre el panel de entrada de In-Place para poder colocar inteligentemente el panel de entrada de In-Place y el icono del panel de entrada en un diseño de aplicación para que no interrumpan el flujo de diseño y, en algún caso, puedan parecer integrados. Este nuevo nivel de control es un gran éxito para el diseño de aplicaciones de tabletas.

## <a name="access-to-the-three-input-panel-areas-writing-pad-character-pad-and-keyboard"></a>Acceso a las tres áreas del panel de entrada: Panel de escritura, Panel de caracteres y Teclado

El Panel de entrada tiene tres áreas de entrada, el Panel de escritura, el Panel de caracteres y el Teclado. Con el [**objeto TextInputPanel,**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) una aplicación puede especificar el área de entrada predeterminada que se muestra al usuario cuando se abre el Panel de entrada. La razón principal para que una aplicación lo haga es emparejar el área de entrada con el tipo de entrada de campo específico. Por ejemplo, el Panel de escritura es probablemente el más adecuado para rellenar un campo de comentarios, pero el teclado puede ser más cómodo para escribir un número de serie de producto que contenga números y letras. Para especificar el área de entrada predeterminada, una aplicación establece la propiedad [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) en una de las tres áreas de entrada definidas por la [**enumeración PanelInputArea.**](/windows/win32/api/peninputpanel/ne-peninputpanel-panelinputarea) En la ilustración siguiente se muestran las tres áreas de entrada.

![panel de entrada de escritura, carácter y teclado](images/3f1e3d03-88b9-478c-b12d-00d341bc8d5c.jpg)

El área de entrada predeterminada del sistema es el Panel de escritura para inglés, francés, alemán, español, italiano, portugués, neerlandés y todos los demás idiomas de entrada latinos. Para los idiomas de entrada de Asia Oriental, incluidos japonés, chino y coreano, el área de entrada predeterminada es el Panel de caracteres. Sin embargo, cuando el usuario cambia el área de entrada, invalida el área de entrada predeterminada para el idioma de entrada actual y se almacena como el nuevo valor predeterminado para ese idioma de entrada. El teclado es el área de entrada predeterminada para los campos de contraseña, independientemente del idioma de entrada, a menos que la directiva de usuario o grupo haya deshabilitado la seguridad de las contraseñas. En todos los casos, al establecer el área predeterminada del panel de entrada se invalida mediante programación el valor predeterminado del sistema, a menos que el campo actual sea un campo de contraseña o el reconocedor de escritura a mano para el idioma de entrada actual no admita el área de entrada seleccionada mediante programación. Al establecer [**la propiedad DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) en **InPlaceDirection \_ Auto,** se restaura la configuración predeterminada del sistema.

Independientemente de si el área predeterminada del panel de entrada se ha establecido mediante programación o no, el usuario tiene la opción de cambiar el área del panel de entrada actual una vez abierto el Panel de entrada. Una vez que el usuario ha cambiado el área de entrada actual, la selección del usuario se conserva hasta que se cierra el Panel de entrada o el usuario cambia la selección de nuevo. Una vez que el Panel de entrada se cierra y se vuelve a abrir, se vuelve a ver el área de entrada predeterminada establecida mediante programación.

Dado que el área del panel de entrada actual puede ser diferente del área de panel de entrada predeterminada, una aplicación puede consultar la propiedad [**CurrentInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea) para determinar qué área de entrada está visible actualmente. Si el Panel de entrada no está visible actualmente, el área de entrada actual es igual al área de entrada predeterminada. La **propiedad CurrentInputArea** nunca es igual a **PanelInputArea \_ Auto.** Si [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) es igual a **PanelInputArea \_ Auto,** **currentInputArea** es igual al último área de entrada mostrada o al valor predeterminado del sistema para el idioma de entrada actual si el Panel de entrada nunca se ha mostrado.

La diferencia principal entre la compatibilidad del área de entrada que se encuentra en el objeto [**PenInputPanel**](peninputpanel-class.md) y la del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es el hecho de que la aplicación ahora tiene la opción de establecer el área de entrada predeterminada en el Panel de caracteres, además del Panel de escritura y el Teclado.

Con las propiedades anteriores, una aplicación puede controlar el área de entrada del Panel de entrada que se muestra en distintos campos y optimizar la experiencia de entrada de texto del usuario. Además, la aplicación puede mantener el conocimiento del área de entrada actual y tomar decisiones condicionales según qué área de entrada es más adecuada para la tarea del usuario actual.

## <a name="detailed-information-about-input-panels-interaction-mode"></a>Información detallada sobre el modo de interacción del panel de entrada

Además de poder detectar el área de entrada actual del Panel de entrada, también es posible detectar el modo de interacción actual: En contexto, Acoplado o Flotante. Puede ser importante que la aplicación conozca el modo de interacción actual para comprender cómo interactúa el usuario con la aplicación o porque algunos métodos y propiedades del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) solo se aplican al modo de interacción In-Place. Por ejemplo, en la aplicación, los reflujos de elementos de la interfaz de usuario existentes y, a continuación, coloca el panel de entrada de In-Place sobre un área en blanco en sus interfaces de usuario deben comprobar que el modo de interacción actual está en contexto antes de realizar ajustes.

![modos de panel de entrada acoplado, flotante y a ritmo](images/98c8e96b-99b2-477a-9843-33b1fae7e75b.jpg)

La [**propiedad CurrentInteractionMode,**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinteractionmode) del [**objeto TextInputPanel,**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) almacena el modo de interacción actual según lo elegido por el usuario. Los modos posibles se definen mediante la [**enumeración InteractionMode**](/windows/win32/api/peninputpanel/ne-peninputpanel-interactionmode) como:

**InteractionMode \_ InPlace:** en el In-Place de entrada del modo de interacción aparece junto al campo de entrada de texto que actualmente tiene el foco. De forma predeterminada, el In-Place panel de entrada aparece cuando se coloca un punto de inserción en un campo de entrada de texto. Al pulsar en el icono del panel de entrada, se expande el Panel de entrada. El panel In-Place entrada solo está visible cuando un punto de inserción está en un campo editable.

InteractionMode Flotante: el modo de interacción flotante es similar al modo de interacción InPlace, salvo que no \_ está asociado a un punto de inserción. El Panel de entrada flotante se abre pulsando en la pestaña Panel de entrada que aparece de forma predeterminada en el borde izquierdo de la pantalla. El usuario puede arrastrar y cambiar la posición tanto del panel de entrada flotante como del panel de entrada. En el modo flotante, la posición y el control del Panel de entrada se deja completamente al usuario.

InteractionMode DockedTop: en el modo de interacción Docked-Top el panel de entrada aparece en la parte superior de la pantalla y se cambia el tamaño del escritorio activo para que el Panel de entrada no se superponga con ninguna otra ventana o elemento de la interfaz \_ de usuario. En el modo acoplado, el Panel de entrada no se puede arrastrar ni mover.

InteractionMode DockedBottom: el Docked-Bottom de interacción es el mismo que el modo Docked-Top excepto que el Panel de entrada aparece en la parte inferior \_ de la pantalla.

Cuando el Panel de entrada no está visible, el modo de interacción actual es En contexto.

La publicación del modelo de interacción actual es otra manera en que el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) proporciona más información sobre el estado del Panel de entrada que en cualquier versión anterior.

## <a name="detailed-information-about-input-panels-correction-mode"></a>Información detallada sobre el modo de corrección del panel de entrada

El aspecto final del Panel de entrada que proporciona el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es el modo de corrección. Conocer el modo de corrección ayuda a las aplicaciones a determinar el tamaño actual del Panel de entrada. Controlar cómo se expande la corrección posterior a la inserción en una aplicación es una manera de personalizar la experiencia de corrección en una aplicación.

Hay dos modos básicos en los que puede aparecer el peine de corrección: la inserción previa y la posterior a la inserción. El peine de corrección previa a la inserción se usa para corregir el texto antes de insertarlo en una aplicación. Se activa pulsando en el texto pendiente que aparece debajo de la línea base en el Panel de escritura a medida que el usuario escribe. El peine de corrección posterior a la inserción se usa para corregir el texto después de insertarlo en una aplicación. Se activa colocando el punto de inserción en o seleccionando el texto que se insertó anteriormente. Más allá de los dos modos básicos, hay varias variaciones sobre cómo puede aparecer el peine de corrección posterior a la inserción. En primer lugar, puede aparecer encima o debajo del Panel de entrada y, en segundo lugar, puede aparecer contraído o expandido. En el estado contraído, el peine de corrección posterior a la inserción solo muestra una lista de alternativas. En el estado expandido, incluye las alternativas y un área para volver a escribir la palabra.

![panel de entrada de corrección, pre y post insert](images/6cc627de-fc15-4721-9f6a-7e1517d9e650.jpg)

La [**propiedad CurrentCorrectionMode permite**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode) a una aplicación determinar la configuración actual del peine de corrección. Los valores posibles de esta propiedad definidos por las enumeraciones [**CorrectionMode**](/windows/win32/api/peninputpanel/ne-peninputpanel-correctionmode) son: **NotVisible,** **PreInsertion,** **PostInsertionCollapsed** y **PostInsertionExpanded.** Cuando no hay ningún panel de entrada o corrección visible, **CurrentCorrectionMode** es **NotVisible.**

De forma predeterminada, el sistema muestra el peine de corrección posterior a la inserción expandido cuando selecciona texto que se puede corregir y lo muestra contraído cuando el punto de inserción se coloca en texto que se puede corregir. Una aplicación puede especificar dónde debe mostrarse siempre expandido el peine de corrección posterior a la inserción estableciendo la propiedad [**ExpandPostInsertionCorrection**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_expandpostinsertioncorrection) en **true.** El valor predeterminado del sistema es **false.** Cuando se usa la propiedad **ExpandPostInsertionCorrection** junto con la interfaz [**IHandWrittenTextInsertion,**](/windows/desktop/api/peninputpanel/nn-peninputpanel-ihandwrittentextinsertion) un desarrollador de aplicaciones puede agregar compatibilidad de corrección a aplicaciones que no la obtienen automáticamente.

El seguimiento y el control del estado de corrección del panel de entrada es una de las muchas características nuevas del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) que hacen posible la integración del panel de entrada y la aplicación.

## <a name="event-notification-before-and-after-the-event-occurs"></a>Notificación de eventos antes y después de que se produzca el evento

Otro aspecto de la programación del Panel de entrada que se ha mejorado enormemente en el [**objeto TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es el modelo de eventos. Ahora, en lugar de generar solo eventos que señalen un cambio en el estado del Panel de entrada después de que se haya producido el cambio, hay eventos independientes enviados antes y después de que se produzca el cambio. Los eventos que señalan el inicio de un evento contienen verbos tensos presentes, como "Changing" o "Inserting", mientras que los eventos que señalan la conclusión de un evento contienen verbos tensos pasados, como "Changed" o "Inserted".

Este modelo de eventos permite que una aplicación reaccione a un cambio antes o cuando se produzca. El Panel de entrada no puede continuar con un cambio o reanudarse después del cambio hasta que se hayan completado los controladores de eventos para todos los eventos. Estos eventos son sincrónicos y, de esta manera, una aplicación puede retrasar un cambio hasta que haya terminado de reaccionar. Sin embargo, la hora en la que un controlador de eventos ejecuta el Panel de entrada deja de ser accesible para el usuario y puede parecer que se ha quedado, por lo que es importante que el controlador de eventos tenga un buen rendimiento. Sin embargo, no es posible que una aplicación impida o cancele un evento. Todos los parámetros de evento son de solo lectura. A continuación se muestra una descripción de los seis pares de eventos del objeto [**TextInputPanel:**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel)

-   [**InPlaceStateChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanging)  /  [**InPlaceStateChanged:**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanged)notificación de que el estado en su lugar está a punto o acaba de cambiar de mantener el puntero a expandido o viceversa. Los parámetros son el estado local nuevo y antiguo. Se encuentra con un cambio en el valor de la [**propiedad CurrentInPlaceState.**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate)
-   [**InPlaceSizeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging)  /  [**InPlaceSizeChanged:**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged)se indica cuando el tamaño del panel de entrada de In-Place está a punto de cambiar o ha cambiado debido a un cambio de tamaño del usuario, un crecimiento automático o un cambio de área de entrada. Los parámetros son el rectángulo delimitador nuevo y antiguo. Se modifica con un cambio en el valor de la [**propiedad InPlaceBoundingRectangle.**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle)
-   [**InputAreaChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanging)  /  [**InputAreaChanged:**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanged)informa cuando el área de entrada del Panel de entrada está a punto de cambiar o ha cambiado de a la otra de las tres áreas de entrada posibles: Panel de escritura, Panel de caracteres o Teclado. Los parámetros son el área de entrada nueva y antigua. Coincide con un cambio en el valor de la [**propiedad CurrentInputArea.**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea)
-   [**CorrectionModeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanging)  /  [**CorrectionModeChanged:**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanged)notificación de que el modo de corrección está a punto de cambiar o ha cambiado. Los modos de corrección posibles son: no visible, Pre-Insertion, Post-Insertion collapsed y Post-Insertion expanded. Los parámetros son el modo de corrección nuevo y antiguo. Coincide con un cambio en el valor de la [**propiedad CurrentCorrectionMode.**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode)
-   [**InPlaceVisibilityChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging)  /  [**InPlaceVisibilityChanged:**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged)indica cuándo la visibilidad In-Place panel de entrada está a punto de cambiar o ha cambiado. Los parámetros son la visibilidad nueva y antigua. Una nueva visibilidad de **false** significa que In-Place panel de entrada no está abierto, pero no impide que el Panel de entrada esté visible en el modo de interacción flotante o acoplado.
-   [**TextInserting**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting)  /  [**TextInserted:**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted)indica cuándo se va a insertar texto o se ha insertado desde el Panel de entrada. El parámetro es una matriz [**de objetos InkDisp,**](inkdisp-class.md) cada uno de los que contiene una línea de la entrada de lápiz y el texto que conste de la inserción. Más información sobre este evento en la sección siguiente.

Estos eventos proporcionan a las aplicaciones información esencial sobre los cambios en el Panel de entrada y les permiten reaccionar en consecuencia. De nuevo, el cambio en el modelo de eventos del Panel de entrada representa un paso hacia una mejor interacción entre las aplicaciones y el Panel de entrada.

## <a name="support-for-collecting-the-ink-and-text-entered-in-input-panel"></a>Compatibilidad con la recopilación de la entrada manuscrita y el texto especificados en el panel de entrada

Por último, pero ciertamente no menos importante, una característica nueva muy eficaz del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es la capacidad de obtener el objeto ink para el texto escrito a través del Panel de entrada fuera del Panel de entrada en el momento en que el texto se inserta en una aplicación. Esta ha sido una característica solicitada a menudo para el seguimiento de cambios y el mantenimiento de registros. También permite que las aplicaciones usen la entrada de lápiz en su interfaz de usuario como un elemento estático o con una superficie de entrada manuscrita personalizada.

Para recibir el objeto [**InkDisp**](inkdisp-class.md) para el texto escrito a través del Panel de entrada, una aplicación debe registrarse para recibir los eventos [**TextInserting**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting) o [**TextInserted generados**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted) por el [**objeto TextInputPanel.**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) El **evento TextInserting** se desencadena inmediatamente antes de insertar texto desde el Panel de entrada en una aplicación y el texto no se inserta hasta que se completan todos los controladores de eventos. El **evento TextInserted** se produce inmediatamente después de insertar la prueba. El único parámetro para el evento **TextInserting** y **TextInserted** es una matriz de objetos **InkDisp** que incluye un objeto **InkDisp** para cada línea de texto insertada desde el Panel de entrada. Nota: El Panel de entrada está inactivo mientras se ejecutan los controladores de eventos y puede aparecer como un error para el usuario, por lo que es importante que estos controladores de eventos sean ligeros y asegurarse de que se ejecutan rápidamente. Además, una aplicación no debe crear un controlador para este evento a menos que tenga un uso específico para la información, ya que hay un costo de rendimiento asociado a hacerlo. El Panel de entrada solo serializa los datos de entrada de lápiz si hay una aplicación que solicita los datos; de lo contrario, el Panel de entrada puede omitir esta costosa operación. Los parámetros de los eventos **TextInserting** y **TextInserted** son de solo lectura, lo que significa que las aplicaciones no pueden cambiar el texto insertado antes de insertarlo en la aplicación.

Las posibilidades de lo que las aplicaciones pueden hacer con esta nueva funcionalidad son amplias y no podría ser más fácil de usar. Permitir que el texto y la entrada de lápiz reconocidos escritos a través del Panel de entrada sean recopilados por las aplicaciones es simplemente otra manera de mejorar la historia del desarrollador del Panel de entrada en Windows Vista.

## <a name="conclusion"></a>Conclusión

En general, la historia de programación del panel de entrada de Tablet PC se ha mejorado enormemente con la introducción del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) en Windows Vista. Mediante el uso del **objeto TextInputPanel,** los desarrolladores de aplicaciones tienen un mayor control y más información sobre el panel de entrada de estado en la versión anterior. Como resultado, se recomienda encarecidamente a los desarrolladores de aplicaciones que compilarán nuevas aplicaciones de Tablet PC o actualicen las aplicaciones existentes que usen el objeto **TextInputPanel** en lugar del objeto [**PenInputPanel**](peninputpanel-class.md) ahora en desuso. Además, la compatibilidad con nuevas características, como el posicionamiento absoluto del panel de entrada y el icono del panel de entrada, y la capacidad de la aplicación para recibir tanto el texto del reconocedor como la entrada de lápiz escritos a través del Panel de entrada permiten nuevos escenarios y funcionalidades de la aplicación. La inclusión de estas características y otras varias están en respuesta directa a los comentarios de los desarrolladores y marca los primeros pasos para la integración completa del Panel de entrada con aplicaciones de Tablet PC. En última instancia, la expansión de la funcionalidad de la aplicación de Tablet PC es una gran diferencia para los desarrolladores de aplicaciones y la plataforma de Tablet PC.

 

 



