---
description: Microsoft Windows permite controlar el acceso a objetos de subproceso. Para obtener más información sobre la seguridad, vea Access-Control Modelo.
ms.assetid: 72709446-5c59-4fac-8dc8-7912906ecc85
title: Derechos de acceso y seguridad de subprocesos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e16b0ac5b4142f819d59775014a82a79a188bdd3
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/13/2021
ms.locfileid: "127062779"
---
# <a name="thread-security-and-access-rights"></a>Derechos de acceso y seguridad de subprocesos

Microsoft Windows permite controlar el acceso a objetos de subproceso. Para obtener más información sobre la seguridad, vea [Modelo de control de acceso](../secauthz/access-control-model.md).

Puede especificar un descriptor de [seguridad](../secauthz/security-descriptors.md) para un subproceso al llamar a las funciones [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera), [**CreateProcessWithLogonW,**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw) [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread)o [**CreateRemoteThread.**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) Si especifica **NULL,** el subproceso obtiene un descriptor de seguridad predeterminado. Las ACL del descriptor de seguridad predeterminado para un subproceso proceden del token principal o de suplantación del creador.

Para recuperar el descriptor de seguridad de un subproceso, llame a [**la función GetSecurityInfo.**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) Para cambiar el descriptor de seguridad de un subproceso, llame a la [**función SetSecurityInfo.**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo)

El identificador devuelto por la [**función CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) tiene **acceso THREAD ALL \_ \_ ACCESS** al objeto de subproceso. Cuando se llama a [**la función GetCurrentThread,**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentthread) el sistema devuelve un pseudohandle con el acceso máximo que el descriptor de seguridad del subproceso permite al autor de la llamada.

Los derechos de acceso válidos para los objetos de subproceso incluyen [los derechos de acceso estándar](../secauthz/standard-access-rights.md) y algunos derechos de acceso específicos del subproceso. En la tabla siguiente se enumeran los derechos de acceso estándar utilizados por todos los objetos.

| Value                           | Significado                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **DELETE** (0x00010000L)        | Necesario para eliminar el objeto.                                                                                                                                                                                                                                                           |
| **READ \_ CONTROL** (0x00020000L) | Necesario para leer información en el descriptor de seguridad del objeto, sin incluir la información en la SACL. Para leer o escribir la SACL, debe solicitar el derecho **de acceso ACCESS SYSTEM \_ \_ SECURITY.** Para obtener más información, vea [SACL Access Right](../secauthz/sacl-access-right.md). |
| **SYNCHRONIZE** (0x00100000L)   | Derecho a utilizar el objeto para la sincronización. Esto permite que un subproceso espere hasta que el objeto esté en el estado señalado.                                                                                                                                                                |
| **WRITE \_ DAC** (0x00040000L)    | Necesario para modificar la DACL en el descriptor de seguridad del objeto .                                                                                                                                                                                                                   |
| **WRITE \_ OWNER** (0x00080000L)  | Necesario para cambiar el propietario en el descriptor de seguridad del objeto.                                                                                                                                                                                                                  |



 

En la tabla siguiente se enumeran los derechos de acceso específicos del subproceso.



| Value                                            | Significado                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **SYNCHRONIZE** (0x00100000L)                    | Habilita el uso del identificador de subproceso en cualquiera de las [funciones de espera](../sync/wait-functions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **ACCESO \_ A TODOS LOS \_ SUBPROCESOS**                          | Todos los derechos de acceso posibles para un objeto de subproceso. **Windows Server 2003 y Windows XP:** El valor de la marca **THREAD \_ ALL \_ ACCESS** aumentó en Windows Server 2008 y Windows Vista. Si una aplicación compilada para Windows Server 2008 y Windows Vista se ejecuta en Windows Server 2003 o Windows XP, la marca **THREAD \_ ALL \_ ACCESS** contiene bits de acceso que no se admiten y se produce un error en la función que especifica esta marca con **ERROR ACCESS \_ \_ DENIED.** Para evitar este problema, especifique el conjunto mínimo de derechos de acceso necesarios para la operación. Si **se debe usar THREAD ALL \_ \_ ACCESS,** establezca **\_ WIN32 \_ WINNT** en el sistema operativo mínimo de destino de la aplicación (por ejemplo, `#define _WIN32_WINNT _WIN32_WINNT_WINXP` ). Para obtener más información, [vea Using the Windows Headers](../winprog/using-the-windows-headers.md). <br/> |
| **THREAD \_ \_SUPLANTACIÓN DIRECTA** (0x0200)       | Necesario para un subproceso de servidor que suplanta a un cliente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **THREAD \_ GET \_ CONTEXT** (0x0008)                | Necesario para leer el contexto de un subproceso mediante [**GetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **THREAD \_ IMPERSONATE** (0x0100)                 | Necesario para usar la información de seguridad de un subproceso directamente sin llamarla mediante un mecanismo de comunicación que proporciona servicios de suplantación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **THREAD \_ INFORMACIÓN \_ DE CONSULTA** (0x0040)          | Necesario para leer cierta información del objeto de subproceso, como el código de salida (vea [**GetExitCodeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **THREAD \_ CONSULTA \_ DE \_ INFORMACIÓN LIMITADA** (0x0800) | Necesario para leer cierta información de los objetos de subproceso (vea [**GetProcessIdOfThread).**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocessidofthread) A un identificador que tiene el derecho **de acceso THREAD QUERY \_ \_ INFORMATION** se le concede automáticamente **THREAD QUERY LIMITED \_ \_ \_ INFORMATION**.**Windows Server 2003 y Windows XP:** este derecho de acceso no se admite.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **THREAD \_ SET \_ CONTEXT** (0x0010)                | Necesario para escribir el contexto de un subproceso mediante [**SetThreadContext.**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **THREAD \_ SET \_ INFORMATION** (0x0020)            | Necesario para establecer cierta información en el objeto de subproceso.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **THREAD \_ ESTABLECER \_ INFORMACIÓN \_ LIMITADA** (0x0400)   | Necesario para establecer cierta información en el objeto de subproceso. A un identificador que tiene el derecho **de acceso THREAD SET \_ \_ INFORMATION** se le concede automáticamente **THREAD SET LIMITED \_ \_ \_ INFORMATION**.**Windows Server 2003 y Windows XP:** este derecho de acceso no se admite.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **THREAD \_ SET \_ THREAD \_ TOKEN** (0x0080)          | Necesario para establecer el token de suplantación para un subproceso mediante [**SetThreadToken.**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **THREAD \_ SUSPEND \_ RESUME** (0x0002)             | Necesario para suspender o reanudar un subproceso [**(vea SuspendThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) y [**ResumeThread).**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **THREAD \_ TERMINATE** (0x0001)                   | Necesario para finalizar un subproceso mediante [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



 

Puede solicitar el derecho **de acceso ACCESS SYSTEM \_ \_ SECURITY** a un objeto de subproceso si desea leer o escribir la SACL del objeto. Para obtener más información, vea [Listas de control de acceso (ACL)](../secauthz/access-control-lists.md) y Derecho de acceso [sacl](../secauthz/sacl-access-right.md).

## <a name="protected-processes"></a>Procesos protegidos

*Los procesos protegidos* mejoran la compatibilidad con digital Rights Management. El sistema restringe el acceso a los procesos protegidos y a los subprocesos de los procesos protegidos.

**Windows Server 2003 y Windows XP:** Los procesos protegidos se agregaron a partir de Windows Vista.

No se permiten los siguientes derechos de acceso específicos desde un proceso a los subprocesos de un proceso protegido:

**ACCESO \_ A TODOS LOS \_ SUBPROCESOS**  
**\_SUPLANTACIÓN \_ DIRECTA DE SUBPROCESOS**  
**THREAD \_ GET \_ CONTEXT**  
**\_SUPLANTACIÓN DE SUBPROCESO**  
**INFORMACIÓN DE \_ CONSULTA DE \_ SUBPROCESOS**  
**CONTEXTO DEL \_ CONJUNTO DE \_ SUBPROCESOS**  
**INFORMACIÓN DEL \_ CONJUNTO \_ DE SUBPROCESOS**  
**TOKEN DE \_ CONJUNTO DE \_ SUBPROCESOS**  
**THREAD \_ TERMINATE**  


Se introdujo el derecho **THREAD QUERY LIMITED \_ \_ \_ INFORMATION** para proporcionar acceso a un subconjunto de la información disponible a través de **THREAD QUERY \_ \_ INFORMATION**.

 

 
