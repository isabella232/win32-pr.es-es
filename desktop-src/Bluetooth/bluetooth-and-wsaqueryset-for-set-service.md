---
title: Bluetooth y WSAQUERYSET para set service
description: Usar la estructura WSAQUERYSET con la función WSASetService para registrar o quitar instancias de servicio en el espacio de nombres Bluetooth (NS \_ BTH).
ms.assetid: e582156d-a298-4d9b-8ed1-4c558fa4f203
keywords:
- Bluetooth y WSAQUERYSET para set service Bluetooth
- WSAQUERYSET Bluetooth , para establecer el servicio
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 64a632cad2c813856367d4565bc69e0d4baf2eba
ms.sourcegitcommit: d75fc10b9f0825bbe5ce5045c90d4045e3c53243
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/13/2021
ms.locfileid: "127261919"
---
# <a name="bluetooth-and-wsaqueryset-for-set-service"></a>Bluetooth y WSAQUERYSET para set service

Bluetooth usa la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) para facilitar la detección de dispositivos y servicios en el espacio de nombres Bluetooth, NS \_ BTH.

La [**función WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) usa la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) para registrar o quitar instancias de servicio en el espacio de nombres Bluetooth servidor. En la tabla siguiente se enumeran los valores de miembro de la **estructura WSAQUERYSET.**

| Miembro                      | Valor requerido (entrada)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Output                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **dwSize**                  | Debe establecerse en **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)). Se usa como mecanismo de control de versiones.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwOutputFlags**           | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszServiceInstanceName** | Opcional pero recomendable. Se usa para construir el Bluetooth ServiceName.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpServiceClassId**        | Necesario. GUID correspondiente a la clase de servicio. Este valor debe corresponder a un GUID del documento Bluetooth Números asignados para perfiles conocidos o a un UUID único generado por la aplicación para las aplicaciones que no están basadas en perfiles. Se usa para construir una secuencia de atributos ServiceClassIdList con este como único miembro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpVersion**               | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszComment**             | Opcional. Se usa para construir el Bluetooth ServiceDescription.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNameSpace**             | Espacio de nombres en el que se va a restringir el servicio. Debe ser NS \_ BTH.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpNSProviderId**          | No se requiere.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszContext**             | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNumberOfProtocols**     | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpafpProtocols**          | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszQueryString**         | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNumberOfCsAddrs**       | Número de direcciones que se registrarán. Debe ser 1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpcsaBuffer**             | Obligatorio si **lpBlob** no se ha rellenado con una secuencia de SDP sin procesar. Puntero a una estructura INFO de [**CSADDR \_**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info) con su miembro **LocalAddr.lpSockaddr** que apunta a [**SOCKADDR \_ BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) donde el servidor escucha las conexiones. La [**función getsockname**](/windows/desktop/api/winsock/nf-winsock-getsockname) se puede usar para devolver la **estructura SOCKADDR \_ BTH** para un socket enlazado. El sistema usa la información del miembro **lpcsaBuffer** para construir Bluetooth atributo SDP ProtocolDescriptorList. El protocolo y el puerto proporcionados en **lpcsaBuffer** deben ser únicos (no registrados previamente) y se usan para indexar el registro para las llamadas posteriores que se van a eliminar. Se usa para construir el Bluetooth protocolDescriptorList del registro SDP. | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpBlob**                  | Opcional. Puntero a una [**estructura BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob) que apunta a una estructura [**BTH SET \_ \_ SERVICE,**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) lo que permite al cliente proporcionar una estructura específica de Bluetooth que contiene un registro SDP binario construido por la aplicación. Si **lpBlob** se proporciona a la función [**WSASetService,**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) se omiten todos los demás miembros de la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) excepto **dwSize** y **dwNameSpace.** Consulte [Bluetooth blob y blob](bluetooth-and-blob.md) para obtener más información. El envío de un registro SDP binario es necesario en muchos casos, ya que un número limitado de atributos SDP se puede convertir desde la estructura **WSAQUERYSET** y las cadenas solo se convierten a la codificación UTF-8 del idioma predeterminado.           | Si se han proporcionado las estructuras [**opcionales BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob) y [**BTH \_ SET \_ SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) en la entrada, junto con los valores de versión ULONG y HANDLE a los que debe apuntar **BTH SET \_ \_ SERVICE,** la versión se actualiza para que contenga el valor de BTH SDP VERSION para el proveedor de sockets de Bluetooth Windows y se proporciona el identificador, que es necesario para eliminar posteriormente \_ el \_ registro. |



 

> [!Note]  
> Para quitar un servicio, los únicos miembros necesarios en la estructura [**BTH \_ SET \_ SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) son los miembros **pSdpVersion** **y pRecordHandle.**

 

## <a name="related-topics"></a>Temas relacionados

<dl> <dt>

[Bluetooth y WSAQUERYSET para la consulta de dispositivos](bluetooth-and-wsaqueryset-for-device-inquiry.md)
</dt> <dt>

[Bluetooth y WSAQUERYSET para la consulta de servicios](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[Bluetooth y BLOB](bluetooth-and-blob.md)
</dt> <dt>

[Bluetooth y WSASetService](bluetooth-and-wsasetservice.md)
</dt> <dt>

[**BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob)
</dt> <dt>

[**BTH \_ SET \_ SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service)
</dt> <dt>

[**INFORMACIÓN DE \_ CSADDR**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info)
</dt> <dt>

[**getsockname**](/windows/desktop/api/winsock/nf-winsock-getsockname)
</dt> <dt>

[**SOCKADDR \_ BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[Windows Sockets](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

 

 